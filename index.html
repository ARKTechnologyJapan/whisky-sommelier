<!DOCTYPE html>
<!-- saved from url=(0121)https://gensparkpublicblob.blob.core.windows.net/user-upload-image/page/tooluse__wt7iPZ8SpK0k4hm3J-WvQ/index_updated.html -->
<html lang="ja"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ˜¼ã®æœˆã€‚AIã‚½ãƒ ãƒªã‚¨</title>
    <link href="./index_files/tailwind.min.css" rel="stylesheet">
    <link rel="stylesheet" href="./index_files/all.min.css">
    <script src="./index_files/chart.js.ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰"></script>
    <!-- Leaflet.jsåœ°å›³ãƒ©ã‚¤ãƒ–ãƒ©ãƒª -->
    <link rel="stylesheet" href="./index_files/leaflet.css" crossorigin="">
    <script src="./index_files/leaflet.js.ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰" crossorigin=""></script>
    <style>
        body {
            background-color: #000;
            color: #fff;
            font-family: 'Noto Sans JP', sans-serif;
        }
        .header-container {
            background: rgba(0, 0, 0, 0.9);
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            padding: 15px 0;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 1000;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .logo {
            width: 50px;
            height: 50px;
            position: absolute;
            left: 20px;
            object-fit: contain;
            border-radius: 8px;
            background: rgba(78, 205, 197, 0);
            border: 2px solid #4ecdc500;
            padding: 5px;
        }
        
        .header-title {
            color: #fff;
            font-size: 24px;
            font-weight: bold;
            text-align: center;
            margin: 0;
        }
        .container-custom {
            max-width: 1200px;
            margin: 0 auto;
            padding: 100px 20px 20px;
        }
        .taste-matrix {
            width: 300px;
            height: 300px;
            border: 2px solid #fff;
            position: relative;
            background: linear-gradient(to right, rgba(255,255,255,0.1) 0%, rgba(255,255,255,0.05) 50%, rgba(255,255,255,0.1) 100%), 
                        linear-gradient(to top, rgba(255,255,255,0.1) 0%, rgba(255,255,255,0.05) 50%, rgba(255,255,255,0.1) 100%);
        }
        .taste-dot {
            width: 16px;
            height: 16px;
            background-color: #ff6b6b;
            border-radius: 50%;
            position: absolute;
            transform: translate(-50%, -50%);
            cursor: pointer;
            box-shadow: 0 0 10px rgba(255, 107, 107, 0.5);
        }
        .dual-matrix-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 40px;
            margin-top: 20px;
        }
        .matrix-wrapper {
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        .matrix-title {
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 20px;
            color: #4ecdc4;
        }
        .btn-primary {
            background: linear-gradient(45deg, #ff6b6b, #4ecdc4);
            border: none;
            color: white;
            padding: 12px 24px;
            border-radius: 8px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(255, 107, 107, 0.3);
        }
        .btn-primary:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }
        .btn-secondary {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.3);
            color: white;
            padding: 8px 16px;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        .btn-secondary:hover {
            background: rgba(255, 255, 255, 0.2);
        }
        .card {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            padding: 24px;
            margin-bottom: 24px;
            backdrop-filter: blur(10px);
        }
        .whisky-card {
            background: rgba(255, 255, 255, 0.08);
            border: 1px solid rgba(255, 255, 255, 0.15);
            border-radius: 8px;
            padding: 16px;
            margin-bottom: 16px;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
        }
        .whisky-card:hover {
            background: rgba(255, 255, 255, 0.12);
            border-color: #4ecdc4;
            transform: translateY(-2px);
        }
        .whisky-card.selected {
            background: rgba(78, 205, 196, 0.15);
            border-color: #4ecdc4;
            box-shadow: 0 0 15px rgba(78, 205, 196, 0.3);
        }
        .whisky-card.featured {
            background: linear-gradient(135deg, rgba(255, 165, 0, 0.15), rgba(255, 215, 0, 0.10));
            border: 2px solid #FFA500;
            box-shadow: 0 0 20px rgba(255, 165, 0, 0.4);
            animation: pulse-orange 2s infinite;
        }
        @keyframes pulse-orange {
            0% { box-shadow: 0 0 20px rgba(255, 165, 0, 0.4); }
            50% { box-shadow: 0 0 30px rgba(255, 165, 0, 0.6); }
            100% { box-shadow: 0 0 20px rgba(255, 165, 0, 0.4); }
        }
        .featured-label {
            position: absolute;
            top: -10px;
            right: 10px;
            background: linear-gradient(45deg, #FFA500, #FFD700);
            color: #000;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 12px;
            font-weight: bold;
        }
        .loading {
            display: none;
            text-align: center;
            color: #4ecdc4;
        }
        .progress-container {
            display: none;
            margin-top: 20px;
        }
        .progress-bar {
            width: 100%;
            height: 20px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            overflow: hidden;
            margin-bottom: 10px;
        }
        .progress-fill {
            height: 100%;
            background: linear-gradient(45deg, #ff6b6b, #4ecdc4);
            width: 0%;
            transition: width 0.3s ease;
        }
        .progress-text {
            color: #4ecdc4;
            font-size: 14px;
            margin-bottom: 5px;
        }
        .progress-percentage {
            color: #fff;
            font-size: 16px;
            font-weight: bold;
        }
        .error {
            color: #ff6b6b;
            background: rgba(255, 107, 107, 0.1);
            border: 1px solid rgba(255, 107, 107, 0.3);
            padding: 12px;
            border-radius: 8px;
            margin-top: 12px;
        }
        .success {
            color: #4ecdc4;
            background: rgba(78, 205, 196, 0.1);
            border: 1px solid rgba(78, 205, 196, 0.3);
            padding: 12px;
            border-radius: 8px;
            margin-top: 12px;
        }
        .price-slider {
            -webkit-appearance: none;
            width: 100%;
            height: 8px;
            border-radius: 5px;
            background: rgba(255, 255, 255, 0.2);
            outline: none;
            margin: 10px 0;
        }
        .price-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: #4ecdc4;
            cursor: pointer;
        }
        .price-slider::-moz-range-thumb {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: #4ecdc4;
            cursor: pointer;
            border: none;
        }
        .voice-input-btn {
            background: rgba(78, 205, 196, 0.2);
            border: 1px solid #4ecdc4;
            color: #4ecdc4;
            padding: 8px 12px;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        .voice-input-btn:hover {
            background: rgba(78, 205, 196, 0.3);
        }
        .voice-input-btn.recording {
            background: rgba(255, 107, 107, 0.3);
            border-color: #ff6b6b;
            color: #ff6b6b;
        }
        
        .split-layout {
            display: grid;
            grid-template-columns: 1fr 1fr; /* å‡ç­‰ã«åˆ†å‰²ã™ã‚‹ã‚ˆã†ã«å¤‰æ›´ */
            gap: 20px;
            align-items: start;
        }
        
        .recommendations-panel {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            padding: 24px;
            backdrop-filter: blur(10px);
            max-height: 80vh;
            overflow-y: auto;
        }
        
        .chart-panel {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            padding: 20px;
            backdrop-filter: blur(10px);
            position: sticky;
            top: 120px;
            max-height: 80vh;
            overflow-y: auto;
            scrollbar-width: thin;
            scrollbar-color: rgba(78, 205, 196, 0.5) rgba(255, 255, 255, 0.1);
        }
        
        .chart-panel::-webkit-scrollbar {
            width: 8px;
        }
        
        .chart-panel::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 4px;
        }
        
        .chart-panel::-webkit-scrollbar-thumb {
            background: rgba(78, 205, 196, 0.5);
            border-radius: 4px;
        }
        
        .chart-container {
            height: 500px;
            width: 100%;
            position: relative;
        }
        .chart-container h3 {
            text-align: center;
            margin-bottom: 20px;
            color: #4ecdc4;
            font-size: 16px;
        }
        .chart-canvas {
            height: 400px !important;
            width: 100% !important;
        }
        #combinedProfileChart {
            height: 400px !important;
            width: 100% !important;
        }
        .recommendation-summary {
            background: rgba(78, 205, 196, 0.1);
            border: 1px solid rgba(78, 205, 196, 0.3);
            border-radius: 8px;
            padding: 16px;
            margin-bottom: 20px;
            color: #4ecdc4;
        }
        
        .custom-footer {
            display: none;
            text-align: center;
            padding: 20px;
            color: rgba(255, 255, 255, 0.6);
            font-size: 12px;
            margin-top: 40px;
        }
        
        .whisky-overview {
            background: linear-gradient(135deg, rgba(78, 205, 196, 0.1), rgba(255, 107, 107, 0.1));
            border: 2px solid rgba(78, 205, 196, 0.3);
            border-radius: 16px;
            padding: 30px;
            margin-bottom: 30px;
            text-align: center;
            position: relative;
            overflow: hidden;
        }
        
        .whisky-overview::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(45deg, transparent, rgba(255, 255, 255, 0.1), transparent);
            animation: shimmer 3s infinite;
        }
        
        @keyframes shimmer {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }
        
        .whisky-overview h2 {
            font-size: 2.5rem;
            font-weight: bold;
            background: linear-gradient(45deg, #4ecdc4, #ff6b6b);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 20px;
            position: relative;
            z-index: 1;
        }
        
        .whisky-overview .subtitle {
            font-size: 1.2rem;
            color: #4ecdc4;
            margin-bottom: 15px;
            font-weight: 600;
            position: relative;
            z-index: 1;
        }
        
        .whisky-overview .description {
            font-size: 1.1rem;
            line-height: 1.6;
            color: rgba(255, 255, 255, 0.9);
            position: relative;
            z-index: 1;
        }
        
        .whisky-stats {
            display: flex;
            justify-content: space-around;
            margin-top: 25px;
            position: relative;
            z-index: 1;
        }
        
        .stat-item {
            text-align: center;
        }
        
        .stat-number {
            font-size: 2rem;
            font-weight: bold;
            color: #ff6b6b;
            display: block;
        }
        
        .stat-label {
            font-size: 0.9rem;
            color: rgba(255, 255, 255, 0.7);
            margin-top: 5px;
        }
        
        .taste-icon {
            width: 24px;
            height: 24px;
            margin-right: 8px;
            fill: #4ecdc4;
        }

        .chat-section {
            margin-top: 30px;
        }

        .chat-examples {
            background: rgba(78, 205, 196, 0.05);
            border: 1px solid rgba(78, 205, 196, 0.2);
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 15px;
        }

        .question-example {
            display: block;
            padding: 8px 12px;
            margin-bottom: 8px;
            background: rgba(78, 205, 196, 0.1);
            border: 1px solid rgba(78, 205, 196, 0.3);
            border-radius: 6px;
            color: #4ecdc4;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .question-example:hover {
            background: rgba(78, 205, 196, 0.2);
            transform: translateY(-1px);
        }

        .chat-input-container {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }

        .chat-input {
            flex: 1;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.3);
            border-radius: 8px;
            padding: 12px;
            color: #fff;
            font-size: 14px;
        }

        .chat-input:focus {
            outline: none;
            border-color: #4ecdc4;
            box-shadow: 0 0 0 2px rgba(78, 205, 196, 0.2);
        }

        .chat-history {
            max-height: 400px;
            overflow-y: auto;
            padding: 15px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 8px;
            margin-bottom: 15px;
            display: none;
        }

        .chat-message {
            margin-bottom: 15px;
            padding: 12px;
            border-radius: 8px;
            word-wrap: break-word;
            white-space: pre-wrap;
            line-height: 1.6;
            font-size: 14px;
        }

        .ai-message {
            background: rgba(78, 205, 196, 0.15);
            border-left: 3px solid #4ecdc4;
            color: #fff;
        }

        .user-message {
            background: rgba(255, 107, 107, 0.15);
            border-left: 3px solid #ff6b6b;
            color: #fff;
        }

        .chat-history::-webkit-scrollbar {
            width: 6px;
        }

        .chat-history::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 3px;
        }

        .chat-history::-webkit-scrollbar-thumb {
            background: rgba(78, 205, 196, 0.5);
            border-radius: 3px;
        }
        
        @media (max-width: 1024px) {
            .split-layout {
                grid-template-columns: 1fr;
                gap: 20px;
            }
            
            .chart-panel {
                position: static;
            }
            
            .whisky-overview h2 {
                font-size: 2rem;
            }
            
            .whisky-stats {
                flex-direction: column;
                gap: 15px;
            }
            
            .dual-matrix-container {
                grid-template-columns: 1fr;
                gap: 30px;
            }
        }
        
        @media (max-width: 768px) {
            .custom-footer {
                display: block;
            }
            
            .whisky-overview h2 {
                font-size: 1.8rem;
            }
            
            .whisky-overview .subtitle {
                font-size: 1rem;
            }
            
            .whisky-overview .description {
                font-size: 1rem;
            }
        }
        
        .recommendations-panel::-webkit-scrollbar {
            width: 8px;
        }
        
        .recommendations-panel::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 4px;
        }
        
        .recommendations-panel::-webkit-scrollbar-thumb {
            background: rgba(78, 205, 196, 0.5);
            border-radius: 4px;
        }
        
        .recommendations-panel::-webkit-scrollbar-thumb:hover {
            background: rgba(78, 205, 196, 0.7);
        }

        /* æ–°è¦è¿½åŠ ã‚¹ã‚¿ã‚¤ãƒ« - è’¸ç•™æ‰€ãƒãƒƒãƒ—ã¨æƒ…å ±ãƒ‘ãƒãƒ« */
        .distillery-section {
            margin-top: 20px;
            opacity: 0;
            height: 0;
            overflow: hidden;
            transition: opacity 0.8s ease, height 0.8s ease;
        }

        .distillery-section.active {
            opacity: 1;
            height: auto;
        }

        .distillery-container {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .map-container {
            height: 300px;
            border-radius: 12px;
            overflow: hidden;
            border: 2px solid rgba(78, 205, 196, 0.3);
            background-color: #1a1a1a;
        }

        #distilleryMap {
            height: 100%;
            width: 100%;
            background-color: #242424;
        }

        .distillery-info {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(78, 205, 196, 0.3);
            border-radius: 12px;
            padding: 16px;
            color: #fff;
        }

        .distillery-info h3 {
            color: #4ecdc4;
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 10px;
            border-bottom: 1px solid rgba(78, 205, 196, 0.3);
            padding-bottom: 8px;
        }

        .distillery-info-grid {
            display: grid;
            grid-template-columns: auto 1fr;
            gap: 8px 16px;
            margin-top: 15px;
        }

        .info-label {
            color: rgba(255, 255, 255, 0.7);
            font-weight: 600;
        }

        .info-value {
            color: rgba(255, 255, 255, 0.9);
        }

        .distillery-description {
            margin-top: 15px;
            line-height: 1.6;
        }

        .status-active {
            color: #4ecdc4;
            font-weight: bold;
        }

        .status-closed {
            color: #ff6b6b;
            font-weight: bold;
        }

        .status-unknown {
            color: #ffb347;
            font-weight: bold;
        }

        /* Leafletãƒãƒƒãƒ—ã‚¹ã‚¿ã‚¤ãƒ«ã®ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚º */
        .leaflet-container {
            background-color: #f0f0f0 !important;
        }
        .leaflet-tile-pane {
            opacity: 0.9;
        }
        .leaflet-popup-content-wrapper {
            background-color: rgba(40, 44, 52, 0.95) !important;
            color: #fff !important;
            border: 1px solid rgba(78, 205, 196, 0.5);
        }
        .leaflet-popup-tip {
            background-color: rgba(40, 44, 52, 0.95) !important;
        }
        .leaflet-control-zoom a {
            background-color: rgba(40, 44, 52, 0.8) !important;
            color: #fff !important;
            border-color: rgba(78, 205, 196, 0.3) !important;
        }
        .leaflet-control-zoom a:hover {
            background-color: rgba(78, 205, 196, 0.3) !important;
        }
        
        /* å…±é€šã®JSONãƒ‡ãƒ¼ã‚¿å‡¦ç†ç”¨ã‚¹ã‚¿ã‚¤ãƒ« */
        .distillery-map-container {
            height: 300px;
            width: 100%;
            border-radius: 8px;
            overflow: hidden;
            border: 1px solid rgba(78, 205, 196, 0.3);
            position: relative;
            margin-bottom: 15px;
        }

        .distillery-map {
            position: absolute;
            top: 0;
            left: 0;
            height: 100%;
            width: 100%;
            z-index: 1;
        }

        .distillery-info-panel {
            margin-top: 10px;
            padding: 15px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 8px;
            border: 1px solid rgba(78, 205, 196, 0.2);
        }

        .distillery-name {
            color: #4ecdc4;
            font-size: 1.1rem;
            font-weight: bold;
            margin-bottom: 10px;
            padding-bottom: 5px;
            border-bottom: 1px solid rgba(78, 205, 196, 0.3);
        }
        
        /* çµ±ä¸€ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ç”¨ã‚¹ã‚¿ã‚¤ãƒ« */
        .nav-links {
            position: absolute;
            right: 20px;
            display: flex;
            gap: 10px;
        }

        .nav-link {
            color: #fff;
            text-decoration: none;
            padding: 8px 15px;
            border-radius: 6px;
            background: rgba(78, 205, 196, 0.2);
            border: 1px solid rgba(78, 205, 196, 0.3);
            transition: all 0.3s ease;
            font-size: 14px;
            font-weight: bold;
            display: flex;
            align-items: center;
        }

        .nav-link:hover {
            background: rgba(78, 205, 196, 0.3);
            transform: translateY(-2px);
        }

        .nav-link.active {
            background: rgba(78, 205, 196, 0.4);
            border-color: rgba(78, 205, 196, 0.6);
            box-shadow: 0 0 10px rgba(78, 205, 196, 0.3);
        }
    </style>
<style>
    .genspark-notice-dialog {
      display: flex;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0, 0, 0, 0.5);
      z-index: 10001;
      align-items: center;
      justify-content: center;
    }

    .genspark-notice-content {
      background-color: white;
      border-radius: 8px;
      max-width: 600px;
      width: 90%;
      box-sizing: border-box;
      padding: 10px 30px 30px 30px;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
      font-size: 16px;
    }

    .genspark-notice-title {
      color: #000;
      font-family: Arial;
      font-size: 20px;
      font-style: normal;
      font-weight: 700;
      line-height: 150%; 
    }

    .genspark-notice-list {
      margin: 24px 0;
      
      color: #606366;
      font-family: Arial;
      font-size: 14px;
      font-style: normal;
      font-weight: 400;
      line-height: 150%;
      padding-left: 12px;
    }

    .genspark-notice-list li {
      margin-bottom: 12px;
      list-style-type: disc;
    }

    .genspark-notice-list li a {
      color: #606366;
      text-decoration: underline;
    }

    .genspark-notice-checkbox {
      display: flex;
      align-items: center;
      margin-top: 20px;
      gap: 10px;

      color: #232425;

      font-family: Arial;
      font-size: 14px;
      font-style: normal;
      font-weight: 400;
      line-height: normal;
    }

    .genspark-notice-actions {
      display: flex;
      justify-content: center;
      margin-top: 20px;
    }
      
    .genspark-notice-ok {
      color: #232425;

      text-align: center;
      font-family: Arial;
      font-size: 16px;
      font-style: normal;
      font-weight: 700;
      line-height: 150%; 

      cursor: pointer;
      display: flex;
      height: 40px;
      padding: 6px 14px;
      justify-content: center;
      align-items: center;
      gap: 10px;
      align-self: stretch;
      border-radius: 8px;
      border: 1px solid #000;
      box-sizing: border-box;
      width: 100%;
    }
  </style></head>
<body>
    <div class="header-container">
        <img class="logo" src="./index_files/NH_bar_logo_fin_white.png" alt="æ˜¼ã®æœˆãƒãƒ¼ãƒ­ã‚´">
        <h1 class="header-title">æ˜¼ã®æœˆã€‚AIã‚½ãƒ ãƒªã‚¨</h1>
        <div class="nav-links">
            <a href="https://gensparkpublicblob.blob.core.windows.net/user-upload-image/page/tooluse__wt7iPZ8SpK0k4hm3J-WvQ/index.html" class="nav-link" id="homeLink">ğŸ  AIã‚½ãƒ ãƒªã‚¨</a>
            <a href="https://gensparkpublicblob.blob.core.windows.net/user-upload-image/page/tooluse__wt7iPZ8SpK0k4hm3J-WvQ/whisky_list.html" class="nav-link" id="listLink">ğŸ¥ƒ ã‚¦ã‚£ã‚¹ã‚­ãƒ¼ä¸€è¦§</a>
        </div>
    </div>
    
    <div class="container-custom">
        <div class="whisky-overview">
            <h2>ğŸ· ãƒ—ãƒ¬ãƒŸã‚¢ãƒ ã‚¦ã‚£ã‚¹ã‚­ãƒ¼ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³</h2>
            <div class="subtitle">æœ¬æ—¥ã¯å³é¸ã•ã‚ŒãŸ<span id="whiskyCount">6</span>æœ¬ã®ã‚¦ã‚£ã‚¹ã‚­ãƒ¼ã‹ã‚‰</div>
            <div class="description">
                <strong>ã‚ãªãŸã®å‘³è¦šã«å®Œç’§ã«ãƒãƒƒãƒã™ã‚‹</strong>æœ€é«˜ã®ä¸€æœ¬ã‚’<br>
                AIæŠ€è¡“ã§åˆ†æãƒ»ææ¡ˆã„ãŸã—ã¾ã™
            </div>
            <div class="whisky-stats">
                <div class="stat-item">
                    <span class="stat-number" id="totalWhiskies">6</span>
                    <div class="stat-label">å³é¸éŠ˜æŸ„</div>
                </div>
                <div class="stat-item">
                    <span class="stat-number" id="uniqueRegions">4</span>
                    <div class="stat-label">ç”£åœ°</div>
                </div>
                <div class="stat-item">
                    <span class="stat-number">AI</span>
                    <div class="stat-label">åˆ†ææŠ€è¡“</div>
                </div>
            </div>
        </div>
        
        <div class="card">
            <h2 class="text-2xl font-bold mb-4">
                ğŸ’ ä¾¡æ ¼å¸¯è¨­å®š
            </h2>
            <div class="grid grid-cols-2 gap-4">
                <div>
                    <label class="block mb-2">ä¸‹é™ä¾¡æ ¼: <span id="minPriceDisplay">Â¥5,000</span></label>
                    <input type="range" id="minPrice" class="price-slider" min="1" max="80" value="5" step="1">
                </div>
                <div>
                    <label class="block mb-2">ä¸Šé™ä¾¡æ ¼: <span id="maxPriceDisplay">Â¥50,000</span></label>
                    <input type="range" id="maxPrice" class="price-slider" min="1" max="80" value="50" step="1">
                </div>
            </div>
        </div>
        
        <div class="card">
            <h2 class="text-2xl font-bold mb-4">
                ğŸ‘… å‘³è¦šãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«è¨­å®š
            </h2>
            <p class="mb-6">2ã¤ã®å››è§’å†…ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ã€ãã‚Œãã‚Œã®å¥½ã¿ã®ä½ç½®ã‚’é¸æŠã—ã¦ãã ã•ã„</p>
            
            <div class="dual-matrix-container">
                <div class="matrix-wrapper">
                    <div class="matrix-title">ğŸ¥ƒ åŸºæœ¬çš„ãªå‘³ã®å‚¾å‘</div>
                    <div class="relative">
                        <div class="taste-matrix" id="tasteMatrix1">
                            <div class="taste-dot" id="tasteDot1" style="left: 50%; top: 50%;"></div>
                        </div>
                        <div class="absolute -top-6 left-1/2 transform -translate-x-1/2 text-sm">ãƒ•ãƒ«ãƒ¼ãƒ†ã‚£ãƒ¼</div>
                        <div class="absolute -bottom-6 left-1/2 transform -translate-x-1/2 text-sm">ã‚¹ãƒ¢ãƒ¼ã‚­ãƒ¼</div>
                        <div class="absolute -left-12 top-1/2 transform -translate-y-1/2 text-sm">ãƒ©ã‚¤ãƒˆ</div>
                        <div class="absolute -right-12 top-1/2 transform -translate-y-1/2 text-sm">ãƒ˜ãƒ“ãƒ¼</div>
                    </div>
                    <div class="text-center mt-4">
                        <span id="coordinates1" class="text-xs text-gray-400">åº§æ¨™: X: 0.50, Y: 0.50</span>
                    </div>
                </div>
                
                <div class="matrix-wrapper">
                    <div class="matrix-title">ğŸ¯ è¤‡é›‘ã•ã®å¥½ã¿</div>
                    <div class="relative">
                        <div class="taste-matrix" id="tasteMatrix2">
                            <div class="taste-dot" id="tasteDot2" style="left: 50%; top: 50%;"></div>
                        </div>
                        <div class="absolute -top-6 left-1/2 transform -translate-x-1/2 text-sm">ã¾ã‚ã‚„ã‹</div>
                        <div class="absolute -bottom-6 left-1/2 transform -translate-x-1/2 text-sm">å¼·çƒˆ</div>
                        <div class="absolute -left-12 top-1/2 transform -translate-y-1/2 text-sm">è‹¥ã„</div>
                        <div class="absolute -right-12 top-1/2 transform -translate-y-1/2 text-sm">ç†Ÿæˆ</div>
                    </div>
                    <div class="text-center mt-4">
                        <span id="coordinates2" class="text-xs text-gray-400">åº§æ¨™: X: 0.50, Y: 0.50</span>
                    </div>
                </div>
            </div>
        </div>

        <div class="card chat-section">
            <h2 class="text-2xl font-bold mb-4">
                ğŸ¤– AIã‚½ãƒ ãƒªã‚¨ã¨ãƒãƒ£ãƒƒãƒˆï¼ˆä½•åº¦ã§ã‚‚ãŠæ°—è»½ã«ï¼ï¼‰
            </h2>
            
            <div class="chat-examples">
                <div class="mb-3 text-sm text-gray-300">è³ªå•ä¾‹ï¼ˆã‚¯ãƒªãƒƒã‚¯ã§å…¥åŠ›ï¼‰ï¼š</div>
                <div class="question-example" data-question="ã‚¿ãƒªã‚¹ã‚«ãƒ¼44å¹´ï¼ˆæœ€é«˜é¡80,400å††ï¼‰ã«ã¤ã„ã¦è©³ã—ãæ•™ãˆã¦">ğŸ’ ã‚¿ãƒªã‚¹ã‚«ãƒ¼44å¹´ï¼ˆæœ€é«˜é¡80,400å††ï¼‰ã«ã¤ã„ã¦è©³ã—ãæ•™ãˆã¦</div>
                <div class="question-example" data-question="3000å††ä»¥ä¸‹ã§ã‚¹ãƒ¢ãƒ¼ã‚­ãƒ¼ãªã‚¢ã‚¤ãƒ©å³¶ã®ã‚¦ã‚£ã‚¹ã‚­ãƒ¼ã¯ã‚ã‚‹ï¼Ÿ">ğŸŒŠ 3000å††ä»¥ä¸‹ã§ã‚¹ãƒ¢ãƒ¼ã‚­ãƒ¼ãªã‚¢ã‚¤ãƒ©å³¶ã®ã‚¦ã‚£ã‚¹ã‚­ãƒ¼ã¯ã‚ã‚‹ï¼Ÿ</div>
                <div class="question-example" data-question="æ—¥æœ¬ã®è»½äº•æ²¢ã‚„é•·æ¿±ãªã©ãƒ•ãƒ«ãƒ¼ãƒ†ã‚£ãƒ¼ãªã‚¦ã‚£ã‚¹ã‚­ãƒ¼ã‚’æ¯”è¼ƒã—ã¦">ğŸ¯ æ—¥æœ¬ã®è»½äº•æ²¢ã‚„é•·æ¿±ãªã©ãƒ•ãƒ«ãƒ¼ãƒ†ã‚£ãƒ¼ãªã‚¦ã‚£ã‚¹ã‚­ãƒ¼ã‚’æ¯”è¼ƒã—ã¦</div>
                <div class="question-example" data-question="5000å††å‰å¾Œã§complexity5ç‚¹ã®è¤‡é›‘ãªã‚¦ã‚£ã‚¹ã‚­ãƒ¼ã®ãŠã™ã™ã‚ã¯ï¼Ÿ">â­ 5000å††å‰å¾Œã§complexity5ç‚¹ã®è¤‡é›‘ãªã‚¦ã‚£ã‚¹ã‚­ãƒ¼ã®ãŠã™ã™ã‚ã¯ï¼Ÿ</div>
            </div>

            <div class="chat-input-container">
                <input type="text" id="chatInput" class="chat-input" placeholder="è³ªå•ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„...">
                <button id="voiceInputBtn" class="voice-input-btn">
                    ğŸ¤
                </button>
                <button id="sendChatBtn" class="btn-primary">ğŸ’¬ è³ªå•ã™ã‚‹</button>
            </div>

            <div id="chatHistory" class="chat-history" style="display: none;"></div>
        </div>
        
        <div class="text-center mb-8">
            <button id="getRecommendation" class="btn-primary text-lg mr-4">ğŸ¯ AIã‚¦ã‚£ã‚¹ã‚­ãƒ¼ææ¡ˆã‚’å—ã‘ã‚‹</button>
            <button id="refreshRecommendation" class="btn-secondary text-lg">
                ğŸ”„ ãƒªãƒ•ãƒ¬ãƒƒã‚·ãƒ¥ã—ã¦å†ææ¡ˆ
            </button>
        </div>
        
        <div id="loadingIndicator" class="loading" style="display: none;">
            <div class="animate-spin text-4xl mb-4">ğŸ¥ƒ</div>
            <p class="mt-2">AIãŒæœ€é©ãªã‚¦ã‚£ã‚¹ã‚­ãƒ¼ã‚’åˆ†æä¸­...</p>
        </div>
        
        <div id="progressContainer" class="progress-container" style="display: none;">
            <div id="progressText" class="progress-text">æœ€é©åŒ–å‡¦ç†ä¸­...</div>
            <div class="progress-bar">
                <div id="progressFill" class="progress-fill" style="width: 100%;"></div>
            </div>
            <div id="progressPercentage" class="progress-percentage">100%</div>
        </div>
        
        <div id="splitLayoutContainer" style="display: grid;" class="split-layout">
            <div class="recommendations-panel">
                <h2 class="text-2xl font-bold mb-4">
                    ğŸ¯ AIææ¡ˆçµæœ
                </h2>
                <div id="preferencesSummary" class="recommendation-summary">
                <h3 class="text-lg font-bold mb-3">ğŸ¯ ã‚ãªãŸã®å¥½ã¿ã®å‚¾å‘</h3>
                <div class="space-y-2 text-sm">
                    <div><strong>åŸºæœ¬çš„ãªå‘³ã®å‚¾å‘:</strong> ãƒãƒ©ãƒ³ã‚¹ã®ã¨ã‚ŒãŸãƒã‚¤ãƒ«ãƒ‰ãªå‘³ã‚ã„ã‚’å¥½ã‚€</div>
                    <div><strong>è¤‡é›‘ã•ã®å¥½ã¿:</strong> é©åº¦ã«ç†Ÿæˆã—ãŸé©åº¦ãªè¤‡é›‘ã•ã‚’å¥½ã‚€</div>
                    <div><strong>ä¾¡æ ¼å¸¯:</strong> Â¥5,000 - Â¥50,000</div>
                    
                    <div class="mt-3 pt-2 border-t border-gray-600">
                        ã“ã®ç·åˆãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«ã«åŸºã¥ã„ã¦ã€æœ€é©ãª3éŠ˜æŸ„ã‚’å³é¸ã—ã¾ã—ãŸã€‚
                    </div>
                </div>
            </div>
                <div id="recommendationContent">
                    <div class="whisky-card featured" onclick="selectWhisky(&#39;5&#39;)">
                        <div class="featured-label">â­ æœ€ã‚‚ãŠã™ã™ã‚</div>
                        <h3 class="text-xl font-bold mb-2">è»½äº•æ²¢25å¹´</h3>
                        <div class="flex justify-between items-center mb-2">
                            <span class="text-lg font-semibold text-green-400">Â¥25,000</span>
                            <span class="text-sm bg-blue-600 px-2 py-1 rounded">Japan</span>
                        </div>
                        <p class="text-sm text-gray-300 mb-2">Japanese Whisky</p>
                        <p class="text-sm mb-3">é–‰é–ã•ã‚ŒãŸè»½äº•æ²¢è’¸æºœæ‰€ã‹ã‚‰ã®å¸Œå°‘ãªé€¸å“ã€‚25å¹´ç†Ÿæˆã•ã‚ŒãŸã“ã®è¡¨ç¾ã¯ã€æ—¥æœ¬ã®ç¹Šç´°ã•ã¨æœå®Ÿã®è±Šã‹ã•ã®ãƒãƒ©ãƒ³ã‚¹ãŒè¦‹äº‹ã€‚æ·±ã„è¤‡é›‘ã•ã¨é•·ãç¶šãä½™éŸ»ãŒç‰¹å¾´ã€‚</p>
                        <div class="flex justify-between items-center">
                            <span class="text-sm text-gray-400">é©åˆåº¦: 68%</span>
                            <div class="w-24 h-2 bg-gray-700 rounded-full">
                                <div class="h-full bg-gradient-to-r from-red-500 to-green-500 rounded-full" style="width: 68%"></div>
                            </div>
                        </div>
                    </div>
                
                    <div class="whisky-card selected" onclick="selectWhisky(&#39;3&#39;)">
                        
                        <h3 class="text-xl font-bold mb-2">ãƒãƒƒã‚«ãƒ©ãƒ³1990å¹´SAMAROLI</h3>
                        <div class="flex justify-between items-center mb-2">
                            <span class="text-lg font-semibold text-green-400">Â¥12,200</span>
                            <span class="text-sm bg-blue-600 px-2 py-1 rounded">Scotland</span>
                        </div>
                        <p class="text-sm text-gray-300 mb-2">Single Malt Scotch Whisky - Speyside</p>
                        <p class="text-sm mb-3">æœ‰åãªç‹¬ç«‹ç³»ãƒœãƒˆãƒ©ãƒ¼ã€ã‚µãƒãƒ­ãƒ¼ãƒªã«ã‚ˆã£ã¦ãƒœãƒˆãƒªãƒ³ã‚°ã•ã‚ŒãŸå¸Œå°‘ãªãƒãƒƒã‚«ãƒ©ãƒ³1990å¹´ã€‚è±Šã‹ãªã‚·ã‚§ãƒªãƒ¼ã®å½±éŸ¿ãŒã‚ã‚Šã€ãƒ‰ãƒ©ã‚¤ãƒ•ãƒ«ãƒ¼ãƒ„ã€ã‚ªãƒ¬ãƒ³ã‚¸ãƒ”ãƒ¼ãƒ«ã€ã‚¯ãƒªã‚¹ãƒã‚¹ã‚±ãƒ¼ã‚­ã®é¢¨å‘³ãŒç‰¹å¾´ã€‚è¤‡é›‘ãªæ¨½ã®ã‚¹ãƒ‘ã‚¤ã‚¹ãŒèœ‚èœœã€ãƒˆãƒ•ã‚£ãƒ¼ã€ãƒ€ãƒ¼ã‚¯ãƒãƒ§ã‚³ãƒ¬ãƒ¼ãƒˆã¨èª¿å’Œã—ã¦ã„ã¾ã™ã€‚</p>
                        <div class="flex justify-between items-center">
                            <span class="text-sm text-gray-400">é©åˆåº¦: 60%</span>
                            <div class="w-24 h-2 bg-gray-700 rounded-full">
                                <div class="h-full bg-gradient-to-r from-red-500 to-green-500 rounded-full" style="width: 60%"></div>
                            </div>
                        </div>
                    </div>
                
                    <div class="whisky-card" onclick="selectWhisky(&#39;4&#39;)">
                        
                        <h3 class="text-xl font-bold mb-2">ãƒœã‚¦ãƒ¢ã‚¢26å¹´ãƒ€ãƒ³ã‚«ãƒ³ãƒ†ã‚¤ãƒ©ãƒ¼</h3>
                        <div class="flex justify-between items-center mb-2">
                            <span class="text-lg font-semibold text-green-400">Â¥15,000</span>
                            <span class="text-sm bg-blue-600 px-2 py-1 rounded">Scotland, Islay</span>
                        </div>
                        <p class="text-sm text-gray-300 mb-2">Single Malt Scotch Whisky</p>
                        <p class="text-sm mb-3">ãƒœã‚¦ãƒ¢ã‚¢è’¸æºœæ‰€ã®ç¾ã—ãç†Ÿæˆã•ã‚ŒãŸè¡¨ç¾ã§ã€ãƒ€ãƒ³ã‚«ãƒ³ãƒ†ã‚¤ãƒ©ãƒ¼ç¤¾ã«ã‚ˆã£ã¦ãƒœãƒˆãƒªãƒ³ã‚°ã€‚ã‚¢ã‚¤ãƒ©å³¶ã®ã‚¹ãƒ¢ãƒ¼ã‚­ãƒ¼ã•ã¨é•·æœŸç†Ÿæˆã«ã‚ˆã‚‹æœå®Ÿå‘³ã®ç™ºé”ã®ãƒãƒ©ãƒ³ã‚¹ãŒçµ¶å¦™ã€‚</p>
                        <div class="flex justify-between items-center">
                            <span class="text-sm text-gray-400">é©åˆåº¦: 59%</span>
                            <div class="w-24 h-2 bg-gray-700 rounded-full">
                                <div class="h-full bg-gradient-to-r from-red-500 to-green-500 rounded-full" style="width: 59%"></div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="text-center mt-6">
                    <button id="getAnotherRecommendation" class="btn-secondary">
                        ğŸ”„ åˆ¥ã®ææ¡ˆ
                    </button>
                </div>
            </div>
            
            <div class="chart-panel">
                <h2 class="text-2xl font-bold mb-4">
                    ğŸ“Š å‘³è¦šãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«æ¯”è¼ƒ
                </h2>
                <div class="chart-container">
                    <h3 id="chartTitle">ã‚ãªãŸã®å¥½ã¿ vs ãƒãƒƒã‚«ãƒ©ãƒ³1990å¹´SAMAROLI</h3>
                    <canvas id="combinedProfileChart" class="chart-canvas" style="box-sizing: border-box; display: block; height: 500px; width: 500px;" width="625" height="625"></canvas>
                </div>
                <div class="text-center mt-4">
                    <p class="text-sm text-gray-400">ã‚¦ã‚£ã‚¹ã‚­ãƒ¼ã®éŠ˜æŸ„ã‚’ã‚¯ãƒªãƒƒã‚¯ã™ã‚‹ã¨ã€ã‚ãªãŸã®å¥½ã¿ã¨é‡ã­ã¦è¡¨ç¤ºã•ã‚Œã¾ã™</p>
                </div>
                
                <!-- è’¸ç•™æ‰€ãƒãƒƒãƒ—ã¨æƒ…å ±ã‚»ã‚¯ã‚·ãƒ§ãƒ³ (æœ€åˆã¯éè¡¨ç¤º) -->
                <div id="distillerySection" class="distillery-section active">
                    <h2 class="text-xl font-bold mb-3 text-center">
                        ğŸŒ è’¸ç•™æ‰€æƒ…å ±
                    </h2>
                    <div class="distillery-container">
                        <div class="map-container">
                            <div id="distilleryMap" class="leaflet-container leaflet-touch leaflet-retina leaflet-fade-anim leaflet-grab leaflet-touch-drag leaflet-touch-zoom" tabindex="0" style="position: relative;"><div class="leaflet-pane leaflet-map-pane" style="transform: translate3d(151px, -6px, 0px);"><div class="leaflet-pane leaflet-tile-pane"><div class="leaflet-layer " style="z-index: 1; opacity: 1;"><div class="leaflet-tile-container leaflet-zoom-animated" style="z-index: 17; transform: translate3d(-248px, -92px, 0px) scale(4);"></div><div class="leaflet-tile-container leaflet-zoom-animated" style="z-index: 19; transform: translate3d(0px, 0px, 0px) scale(1);"><img alt="" role="presentation" src="./index_files/77.png" class="leaflet-tile leaflet-tile-loaded" style="width: 256px; height: 256px; transform: translate3d(-76px, -48px, 0px); opacity: 1;"><img alt="" role="presentation" src="./index_files/78.png" class="leaflet-tile leaflet-tile-loaded" style="width: 256px; height: 256px; transform: translate3d(-76px, 208px, 0px); opacity: 1;"><img alt="" role="presentation" src="./index_files/77(1).png" class="leaflet-tile leaflet-tile-loaded" style="width: 256px; height: 256px; transform: translate3d(-332px, -48px, 0px); opacity: 1;"><img alt="" role="presentation" src="./index_files/77(2).png" class="leaflet-tile leaflet-tile-loaded" style="width: 256px; height: 256px; transform: translate3d(180px, -48px, 0px); opacity: 1;"><img alt="" role="presentation" src="./index_files/78(1).png" class="leaflet-tile leaflet-tile-loaded" style="width: 256px; height: 256px; transform: translate3d(-332px, 208px, 0px); opacity: 1;"><img alt="" role="presentation" src="./index_files/78(2).png" class="leaflet-tile leaflet-tile-loaded" style="width: 256px; height: 256px; transform: translate3d(180px, 208px, 0px); opacity: 1;"></div></div></div><div class="leaflet-pane leaflet-shadow-pane"></div><div class="leaflet-pane leaflet-overlay-pane"><svg pointer-events="none" class="leaflet-zoom-animated" width="620" height="356" viewBox="-203 -24 620 356" style="transform: translate3d(-203px, -24px, 0px);"><g><path class="leaflet-interactive" stroke="#ff6b6b" stroke-opacity="1" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" fill="#ff6b6b" fill-opacity="0.7" fill-rule="evenodd" d="M100,155a8,8 0 1,0 16,0 a8,8 0 1,0 -16,0 "></path><path class="leaflet-interactive" stroke="#ff6b6b" stroke-opacity="0.3" stroke-width="1" stroke-linecap="round" stroke-linejoin="round" fill="rgba(255, 107, 107, 0.2)" fill-opacity="0.2" fill-rule="evenodd" d="M92,155a16,16 0 1,0 32,0 a16,16 0 1,0 -32,0 "></path><path class="leaflet-interactive" stroke="#4ecdc4" stroke-opacity="1" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" fill="#4ecdc4" fill-opacity="0.7" fill-rule="evenodd" d="M0 0"></path><path class="leaflet-interactive" stroke="#4ecdc4" stroke-opacity="1" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" fill="#4ecdc4" fill-opacity="0.7" fill-rule="evenodd" d="M0 0"></path><path class="leaflet-interactive" stroke="#4ecdc4" stroke-opacity="1" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" fill="#4ecdc4" fill-opacity="0.7" fill-rule="evenodd" d="M0 0"></path></g></svg></div><div class="leaflet-pane leaflet-marker-pane"></div><div class="leaflet-pane leaflet-tooltip-pane"></div><div class="leaflet-pane leaflet-popup-pane"></div><div class="leaflet-proxy leaflet-zoom-animated" style="transform: translate3d(32183.5px, 19914.5px, 0px) scale(128);"></div></div><div class="leaflet-control-container"><div class="leaflet-top leaflet-left"></div><div class="leaflet-top leaflet-right"></div><div class="leaflet-bottom leaflet-left"></div><div class="leaflet-bottom leaflet-right"><div class="leaflet-control-zoom leaflet-bar leaflet-control"><a class="leaflet-control-zoom-in" href="https://gensparkpublicblob.blob.core.windows.net/user-upload-image/page/tooluse__wt7iPZ8SpK0k4hm3J-WvQ/index_updated.html#" title="Zoom in" role="button" aria-label="Zoom in">+</a><a class="leaflet-control-zoom-out" href="https://gensparkpublicblob.blob.core.windows.net/user-upload-image/page/tooluse__wt7iPZ8SpK0k4hm3J-WvQ/index_updated.html#" title="Zoom out" role="button" aria-label="Zoom out">âˆ’</a></div><div class="leaflet-control-attribution leaflet-control"><a href="https://leafletjs.com/" title="A JS library for interactive maps">Leaflet</a> | Â© <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a></div></div></div></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="custom-footer">
            Powered by Nebula Hirozon Technology
        </div>
    </div>
    
    <script>
        // ã‚°ãƒ­ãƒ¼ãƒãƒ«å¤‰æ•°
        let distilleryMap = null;
        let distilleryMarkers = {};
        let whiskyData = [];
        let profileChartInstance = null;
        let selectedWhisky = null;
        let distilleryDatabase = {};
        let userPreferences = {
            taste: { x: 0.5, y: 0.5 },
            complexity: { x: 0.5, y: 0.5 },
            minPrice: 5,
            maxPrice: 50
        };
        
        // åˆæœŸåŒ–å‡¦ç†
        document.addEventListener('DOMContentLoaded', function() {
            // ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ãƒªãƒ³ã‚¯ã®ã‚¢ã‚¯ãƒ†ã‚£ãƒ–çŠ¶æ…‹ã‚’è¨­å®š
            setActiveNavLinks();
            
            // åˆæœŸåŒ–
            initTasteMatrix();
            initPriceSliders();
            setupChatInput();
            setupQuestionExamples();
            
            // ãƒœã‚¿ãƒ³ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼
            document.getElementById('getRecommendation').addEventListener('click', getRecommendation);
            document.getElementById('refreshRecommendation').addEventListener('click', refreshRecommendation);
            document.getElementById('getAnotherRecommendation').addEventListener('click', getAnotherRecommendation);
            
            // å…±é€šãƒ‡ãƒ¼ã‚¿èª­ã¿è¾¼ã¿
            loadCommonData();
        });
        
        // ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ãƒªãƒ³ã‚¯ã®ã‚¢ã‚¯ãƒ†ã‚£ãƒ–çŠ¶æ…‹è¨­å®š
        function setActiveNavLinks() {
            const currentPage = window.location.pathname.split('/').pop();
            const homeLink = document.getElementById('homeLink');
            const listLink = document.getElementById('listLink');
            
            if (homeLink && listLink) {
                if (currentPage === 'index.html' || currentPage === '') {
                    homeLink.classList.add('active');
                    listLink.classList.remove('active');
                } else if (currentPage === 'whisky_list.html') {
                    homeLink.classList.remove('active');
                    listLink.classList.add('active');
                }
            }
        }
        
        // ä¸¡ãƒšãƒ¼ã‚¸ã§å…±é€šã®JSONèª­ã¿è¾¼ã¿å‡¦ç†
        async function loadCommonData() {
            // ã¾ãšè’¸ç•™æ‰€ãƒ‡ãƒ¼ã‚¿ã‚’èª­ã¿è¾¼ã¿
            await loadDistilleryData().catch(err => console.warn('è’¸ç•™æ‰€ãƒ‡ãƒ¼ã‚¿èª­ã¿è¾¼ã¿ã‚¨ãƒ©ãƒ¼:', err));
            
            // æ¬¡ã«ã‚¦ã‚£ã‚¹ã‚­ãƒ¼ãƒ‡ãƒ¼ã‚¿ã‚’èª­ã¿è¾¼ã¿
            await loadWhiskyData().catch(err => console.warn('ã‚¦ã‚£ã‚¹ã‚­ãƒ¼ãƒ‡ãƒ¼ã‚¿èª­ã¿è¾¼ã¿ã‚¨ãƒ©ãƒ¼:', err));
            
            // ãƒãƒƒãƒ—åˆæœŸåŒ–ï¼ˆä¸¡æ–¹ã®ãƒšãƒ¼ã‚¸ã§åŒã˜é–¢æ•°ã‚’ä½¿ç”¨ï¼‰
            initializeCommonMap();
        }
        
        // ãƒãƒƒãƒ—åˆæœŸåŒ–å…±é€šé–¢æ•°
        function initializeCommonMap() {
            const mapElement = document.getElementById('distilleryMap');
            if (!mapElement) return;
            
            // Leafletãƒãƒƒãƒ—ã®åˆæœŸåŒ–ï¼ˆä¸¡ãƒšãƒ¼ã‚¸ã§åŒã˜è¨­å®šï¼‰
            distilleryMap = L.map('distilleryMap', {
                center: [55.0, -3.0],  // ã‚¹ã‚³ãƒƒãƒˆãƒ©ãƒ³ãƒ‰ä¸­å¿ƒ
                zoom: 5,
                zoomControl: false
            });
            
            // åŒã˜ã‚¿ã‚¤ãƒ«ãƒ¬ã‚¤ãƒ¤ãƒ¼
            L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a>',
                maxZoom: 19
            }).addTo(distilleryMap);
            
            // ã‚ºãƒ¼ãƒ ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«ã‚’å³ä¸‹ã«çµ±ä¸€
            L.control.zoom({
                position: 'bottomright'
            }).addTo(distilleryMap);
            
            // ã‚µã‚¤ã‚ºã‚’æ›´æ–°
            setTimeout(() => {
                distilleryMap.invalidateSize();
            }, 100);
        }
        
        // è’¸ç•™æ‰€ãƒãƒ¼ã‚«ãƒ¼æ›´æ–°ã®å…±é€šé–¢æ•°
        function updateDistilleryMarkers(activeName) {
            // æ—¢å­˜ã®ãƒãƒ¼ã‚«ãƒ¼ã‚’ã‚¯ãƒªã‚¢
            clearAllMarkers();
            
            // ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ãªè’¸ç•™æ‰€ã®ãƒãƒ¼ã‚«ãƒ¼ã‚’ä½œæˆï¼ˆèµ¤è‰²ï¼‰
            if (activeName && distilleryDatabase[activeName]) {
                const distillery = distilleryDatabase[activeName];
                createMarker(distillery, true);  // true = ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ï¼ˆèµ¤è‰²ï¼‰
            }
            
            // ãã®ä»–ã®è’¸ç•™æ‰€ãƒãƒ¼ã‚«ãƒ¼ã‚’ä½œæˆï¼ˆç·‘è‰²ï¼‰
            Object.keys(distilleryDatabase).forEach(name => {
                if (name !== activeName && name !== 'NaN' && distilleryDatabase[name]) {
                    createMarker(distilleryDatabase[name], false);  // false = éã‚¢ã‚¯ãƒ†ã‚£ãƒ–ï¼ˆç·‘è‰²ï¼‰
                }
            });
        }
        
        // ãƒãƒ¼ã‚«ãƒ¼ä½œæˆå…±é€šé–¢æ•°
        function createMarker(distillery, isActive) {
            if (!distillery || !distillery.location) return;
            
            // åº§æ¨™ã®æ¤œè¨¼
            if (!isValidCoordinate(distillery.location.lat, distillery.location.lng)) return;
            
            // ãƒãƒ¼ã‚«ãƒ¼ã®ã‚¹ã‚¿ã‚¤ãƒ«ï¼ˆã‚¢ã‚¯ãƒ†ã‚£ãƒ–=èµ¤ã€éã‚¢ã‚¯ãƒ†ã‚£ãƒ–=ç·‘ï¼‰
            const markerColor = isActive ? '#ff6b6b' : '#4ecdc4';
            const markerOptions = {
                radius: isActive ? 8 : 6,
                fillColor: markerColor,
                color: markerColor,
                weight: 2,
                opacity: 1,
                fillOpacity: 0.7
            };
            
            // ãƒãƒ¼ã‚«ãƒ¼ä½œæˆ
            const marker = L.circleMarker([distillery.location.lat, distillery.location.lng], markerOptions)
                .addTo(distilleryMap);
            
            // ã‚¯ãƒªãƒƒã‚¯ã‚¤ãƒ™ãƒ³ãƒˆ
            marker.on('click', () => showDistilleryInfo(distillery));
            
            // ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ãªã‚‰è¿½åŠ ã‚¨ãƒ•ã‚§ã‚¯ãƒˆï¼ˆãƒ‘ãƒ«ã‚¹ï¼‰
            if (isActive) {
                const pulseOptions = {
                    radius: 20,
                    fillColor: 'rgba(255, 107, 107, 0.2)',
                    color: markerColor,
                    weight: 1,
                    opacity: 0.3,
                    fillOpacity: 0.2
                };
                
                const pulseCircle = L.circleMarker(
                    [distillery.location.lat, distillery.location.lng], 
                    pulseOptions
                ).addTo(distilleryMap);
                
                // ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³åŠ¹æœ
                let isGrowing = true;
                let currentRadius = 20;
                
                const pulseInterval = setInterval(() => {
                    if (isGrowing) {
                        currentRadius += 1;
                        if (currentRadius >= 30) isGrowing = false;
                    } else {
                        currentRadius -= 1;
                        if (currentRadius <= 15) isGrowing = true;
                    }
                    
                    pulseCircle.setRadius(currentRadius);
                }, 100);
                
                // ãƒãƒ¼ã‚«ãƒ¼ã«ãƒ‘ãƒ«ã‚¹æƒ…å ±ã‚’ç´ã¥ã‘
                marker.pulse = {
                    circle: pulseCircle,
                    interval: pulseInterval
                };
            }
            
            // ãƒãƒ¼ã‚«ãƒ¼ä¿å­˜
            distilleryMarkers[distillery.name] = marker;
            return marker;
        }
        
        // åº§æ¨™æ¤œè¨¼ãƒ˜ãƒ«ãƒ‘ãƒ¼é–¢æ•°
        function isValidCoordinate(lat, lng) {
            return lat && lng && !isNaN(lat) && !isNaN(lng) && 
                   lat >= -90 && lat <= 90 && lng >= -180 && lng <= 180;
        }
        
        // å…¨ãƒãƒ¼ã‚«ãƒ¼ã‚¯ãƒªã‚¢é–¢æ•°
        function clearAllMarkers() {
            Object.values(distilleryMarkers).forEach(marker => {
                // ãƒ‘ãƒ«ã‚¹ã‚¨ãƒ•ã‚§ã‚¯ãƒˆãŒã‚ã‚Œã°åœæ­¢ãƒ»å‰Šé™¤
                if (marker.pulse) {
                    clearInterval(marker.pulse.interval);
                    if (marker.pulse.circle) {
                        distilleryMap.removeLayer(marker.pulse.circle);
                    }
                }
                if (distilleryMap) {
                    distilleryMap.removeLayer(marker);
                }
            });
            
            // ãƒãƒ¼ã‚«ãƒ¼é…åˆ—ã‚¯ãƒªã‚¢
            distilleryMarkers = {};
        }
        
        // è’¸ç•™æ‰€æƒ…å ±è¡¨ç¤ºé–¢æ•°
        function showDistilleryInfo(distillery) {
            if (!distillery) return;
            
            // ãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—è¡¨ç¤º
            if (distilleryMap && distillery.location) {
                const popupContent = `<b>${distillery.name}</b><br>${distillery.region || ''}`;
                L.popup()
                    .setLatLng([distillery.location.lat, distillery.location.lng])
                    .setContent(popupContent)
                    .openOn(distilleryMap);
            }
        }
        
        // è’¸ç•™æ‰€ãƒ‡ãƒ¼ã‚¿èª­ã¿è¾¼ã¿
        async function loadDistilleryData() {
            try {
                // ã¾ãšlocalStorageã‹ã‚‰è©¦è¡Œ
                const cachedData = localStorage.getItem('distilleryData');
                if (cachedData) {
                    const cache = JSON.parse(cachedData);
                    if (cache.timestamp && (Date.now() - cache.timestamp < 24 * 60 * 60 * 1000)) {
                        console.log('è’¸ç•™æ‰€ãƒ‡ãƒ¼ã‚¿ã‚’ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‹ã‚‰èª­ã¿è¾¼ã¿ã¾ã—ãŸ');
                        distilleryDatabase = cache.data;
                        return;
                    }
                }
                
                // è¤‡æ•°ã®å¯èƒ½æ€§ã®ã‚ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«åã‚’è©¦ã™
                const possibleFiles = [
                    './distilleries.json',
                    './distillery_data.json',
                    './distillery.json',
                    './data/distilleries.json',
                    'https://raw.githubusercontent.com/user/repo/main/distilleries.json'
                ];
                
                let dataLoaded = false;
                
                for (const fileName of possibleFiles) {
                    try {
                        const response = await fetch(fileName);
                        if (response.ok) {
                            const data = await response.json();
                            if (data && typeof data === 'object') {
                                distilleryDatabase = data;
                                
                                // ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã«ä¿å­˜
                                localStorage.setItem('distilleryData', JSON.stringify({
                                    timestamp: Date.now(),
                                    data: distilleryDatabase
                                }));
                                
                                console.log(`è’¸ç•™æ‰€ãƒ‡ãƒ¼ã‚¿ã‚’ ${fileName} ã‹ã‚‰èª­ã¿è¾¼ã¿ã¾ã—ãŸ`);
                                dataLoaded = true;
                                break;
                            }
                        }
                    } catch (error) {
                        console.warn(`${fileName} ã‹ã‚‰ã®èª­ã¿è¾¼ã¿ã«å¤±æ•—ã—ã¾ã—ãŸ:`, error);
                    }
                }
                
                // ã™ã¹ã¦ã®ãƒ•ã‚¡ã‚¤ãƒ«ã®ãƒ­ãƒ¼ãƒ‰ãŒå¤±æ•—ã—ãŸå ´åˆã¯ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆãƒ‡ãƒ¼ã‚¿ã‚’ä½¿ç”¨
                if (!dataLoaded) {
                    console.log('ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®è’¸ç•™æ‰€ãƒ‡ãƒ¼ã‚¿ã‚’ä½¿ç”¨ã—ã¾ã™');
                    distilleryDatabase = getDefaultDistilleryData();
                }
                
            } catch (error) {
                console.error('è’¸ç•™æ‰€ãƒ‡ãƒ¼ã‚¿ã®èª­ã¿è¾¼ã¿ã«å¤±æ•—ã—ã¾ã—ãŸ:', error);
                distilleryDatabase = getDefaultDistilleryData();
            }
        }
        
        // ã‚¦ã‚£ã‚¹ã‚­ãƒ¼ãƒ‡ãƒ¼ã‚¿èª­ã¿è¾¼ã¿
        async function loadWhiskyData() {
            try {
                // ã¾ãšlocalStorageã‹ã‚‰è©¦è¡Œ
                const cachedData = localStorage.getItem('whiskyData');
                if (cachedData) {
                    const cache = JSON.parse(cachedData);
                    if (cache.timestamp && (Date.now() - cache.timestamp < 24 * 60 * 60 * 1000)) {
                        console.log('ã‚¦ã‚£ã‚¹ã‚­ãƒ¼ãƒ‡ãƒ¼ã‚¿ã‚’ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‹ã‚‰èª­ã¿è¾¼ã¿ã¾ã—ãŸ');
                        whiskyData = cache.data;
                        updateUIWithData();
                        return;
                    }
                }
                
                // è¤‡æ•°ã®å¯èƒ½æ€§ã®ã‚ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«åã‚’è©¦ã™
                const possibleFiles = [
                    './whisky_data.json',
                    './whiskey_data.json',
                    './data.json',
                    './data/whiskies.json',
                    'https://raw.githubusercontent.com/user/repo/main/whisky_data.json'
                ];
                
                let dataLoaded = false;
                
                for (const fileName of possibleFiles) {
                    try {
                        const response = await fetch(fileName);
                        if (response.ok) {
                            const data = await response.json();
                            if (Array.isArray(data)) {
                                whiskyData = data;
                                
                                // ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã«ä¿å­˜
                                localStorage.setItem('whiskyData', JSON.stringify({
                                    timestamp: Date.now(),
                                    data: whiskyData
                                }));
                                
                                console.log(`ã‚¦ã‚£ã‚¹ã‚­ãƒ¼ãƒ‡ãƒ¼ã‚¿ã‚’ ${fileName} ã‹ã‚‰èª­ã¿è¾¼ã¿ã¾ã—ãŸ`);
                                dataLoaded = true;
                                updateUIWithData();
                                break;
                            }
                        }
                    } catch (error) {
                        console.warn(`${fileName} ã‹ã‚‰ã®èª­ã¿è¾¼ã¿ã«å¤±æ•—ã—ã¾ã—ãŸ:`, error);
                    }
                }
                
                // ã™ã¹ã¦ã®ãƒ•ã‚¡ã‚¤ãƒ«ã®ãƒ­ãƒ¼ãƒ‰ãŒå¤±æ•—ã—ãŸå ´åˆã¯ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆãƒ‡ãƒ¼ã‚¿ã‚’ä½¿ç”¨
                if (!dataLoaded) {
                    console.log('ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®ã‚¦ã‚£ã‚¹ã‚­ãƒ¼ãƒ‡ãƒ¼ã‚¿ã‚’ä½¿ç”¨ã—ã¾ã™');
                    whiskyData = getDefaultWhiskyData();
                    updateUIWithData();
                }
                
            } catch (error) {
                console.error('ã‚¦ã‚£ã‚¹ã‚­ãƒ¼ãƒ‡ãƒ¼ã‚¿ã®èª­ã¿è¾¼ã¿ã«å¤±æ•—ã—ã¾ã—ãŸ:', error);
                whiskyData = getDefaultWhiskyData();
                updateUIWithData();
            }
        }
        
        // UIã«ãƒ‡ãƒ¼ã‚¿ã‚’åæ˜ 
        function updateUIWithData() {
            if (!whiskyData || whiskyData.length === 0) return;
            
            document.getElementById('whiskyCount').textContent = whiskyData.length;
            document.getElementById('totalWhiskies').textContent = whiskyData.length;
            
            // ãƒ¦ãƒ‹ãƒ¼ã‚¯ãªç”£åœ°æ•°ã‚’è¨ˆç®—
            const uniqueRegions = new Set();
            whiskyData.forEach(whisky => {
                if (whisky.region) uniqueRegions.add(whisky.region);
            });
            document.getElementById('uniqueRegions').textContent = uniqueRegions.size;
        }
        
        // ãƒ†ã‚¤ã‚¹ãƒˆè¡Œåˆ—ã®åˆæœŸåŒ–
        function initTasteMatrix() {
            const tasteMatrix1 = document.getElementById('tasteMatrix1');
            const tasteMatrix2 = document.getElementById('tasteMatrix2');
            const tasteDot1 = document.getElementById('tasteDot1');
            const tasteDot2 = document.getElementById('tasteDot2');
            const coordinates1 = document.getElementById('coordinates1');
            const coordinates2 = document.getElementById('coordinates2');
            
            // ä¸­å¿ƒç‚¹ã«é…ç½®ï¼ˆ50%,50%ï¼‰
            tasteDot1.style.left = '50%';
            tasteDot1.style.top = '50%';
            tasteDot2.style.left = '50%';
            tasteDot2.style.top = '50%';
            coordinates1.textContent = `åº§æ¨™: X: 0.50, Y: 0.50`;
            coordinates2.textContent = `åº§æ¨™: X: 0.50, Y: 0.50`;
            
            // ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ—ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹ã‚’æ›´æ–°
            userPreferences.taste = { x: 0.5, y: 0.5 };
            userPreferences.complexity = { x: 0.5, y: 0.5 };
            
            // ã‚¯ãƒªãƒƒã‚¯ãƒãƒ³ãƒ‰ãƒ©è¨­å®š
            function setupMatrixClickHandlers(matrix, dot, coordsDisplay, preferenceProp) {
                matrix.addEventListener('click', function(event) {
                    const rect = matrix.getBoundingClientRect();
                    const x = (event.clientX - rect.left) / rect.width;
                    const y = (event.clientY - rect.top) / rect.height;
                    
                    dot.style.left = (x * 100) + '%';
                    dot.style.top = (y * 100) + '%';
                    
                    coordsDisplay.textContent = `åº§æ¨™: X: ${x.toFixed(2)}, Y: ${y.toFixed(2)}`;
                    
                    // ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ—ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹ã‚’æ›´æ–°
                    userPreferences[preferenceProp] = { x, y };
                });
            }
            
            setupMatrixClickHandlers(tasteMatrix1, tasteDot1, coordinates1, 'taste');
            setupMatrixClickHandlers(tasteMatrix2, tasteDot2, coordinates2, 'complexity');
        }
        
        // ä¾¡æ ¼ã‚¹ãƒ©ã‚¤ãƒ€ãƒ¼ã®åˆæœŸåŒ–
        function initPriceSliders() {
            const minPriceSlider = document.getElementById('minPrice');
            const maxPriceSlider = document.getElementById('maxPrice');
            const minPriceDisplay = document.getElementById('minPriceDisplay');
            const maxPriceDisplay = document.getElementById('maxPriceDisplay');
            
            function updatePriceDisplay() {
                const minPrice = parseInt(minPriceSlider.value);
                const maxPrice = parseInt(maxPriceSlider.value);
                
                // min ãŒ max ã‚’è¶…ãˆãªã„ã‚ˆã†ã«
                if (minPrice > maxPrice) {
                    minPriceSlider.value = maxPrice;
                    userPreferences.minPrice = maxPrice;
                } else {
                    userPreferences.minPrice = minPrice;
                }
                
                // max ãŒ min ã‚’ä¸‹å›ã‚‰ãªã„ã‚ˆã†ã«
                if (maxPrice < minPrice) {
                    maxPriceSlider.value = minPrice;
                    userPreferences.maxPrice = minPrice;
                } else {
                    userPreferences.maxPrice = maxPrice;
                }
                
                // è¡¨ç¤ºã‚’æ›´æ–°
                minPriceDisplay.textContent = `Â¥${userPreferences.minPrice},000`;
                maxPriceDisplay.textContent = `Â¥${userPreferences.maxPrice},000`;
            }
            
            minPriceSlider.addEventListener('input', updatePriceDisplay);
            maxPriceSlider.addEventListener('input', updatePriceDisplay);
            
            // åˆæœŸå€¤ã‚’è¨­å®š
            minPriceSlider.value = userPreferences.minPrice;
            maxPriceSlider.value = userPreferences.maxPrice;
            updatePriceDisplay();
        }
        
        // ãƒãƒ£ãƒƒãƒˆå…¥åŠ›ã®è¨­å®š
        function setupChatInput() {
            const chatInput = document.getElementById('chatInput');
            const sendChatBtn = document.getElementById('sendChatBtn');
            const chatHistory = document.getElementById('chatHistory');
            
            sendChatBtn.addEventListener('click', () => {
                const question = chatInput.value.trim();
                if (!question) return;
                
                // ãƒãƒ£ãƒƒãƒˆå±¥æ­´ã®è¡¨ç¤º
                if (chatHistory.style.display !== 'block') {
                    chatHistory.style.display = 'block';
                }
                
                // ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’è¿½åŠ 
                addChatMessage(question, 'user');
                
                // AIã®å¿œç­”ã‚’ç”Ÿæˆ
                setTimeout(() => {
                    const response = generateAIResponse(question);
                    addChatMessage(response, 'ai');
                }, 500);
                
                // å…¥åŠ›ã‚’ã‚¯ãƒªã‚¢
                chatInput.value = '';
            });
            
            chatInput.addEventListener('keypress', (e) => {
                if (e.key === 'Enter') {
                    sendChatBtn.click();
                }
            });
        }
        
        // è³ªå•ä¾‹ã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—
        function setupQuestionExamples() {
            const examples = document.querySelectorAll('.question-example');
            examples.forEach(example => {
                example.addEventListener('click', () => {
                    const question = example.getAttribute('data-question');
                    document.getElementById('chatInput').value = question;
                });
            });
        }
        
        // ãƒãƒ£ãƒƒãƒˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸è¿½åŠ 
        function addChatMessage(message, type) {
            const chatHistory = document.getElementById('chatHistory');
            const messageElem = document.createElement('div');
            messageElem.className = `chat-message ${type}-message`;
            messageElem.textContent = message;
            chatHistory.appendChild(messageElem);
            chatHistory.scrollTop = chatHistory.scrollHeight;
        }
        
        // AIãƒ¬ã‚¹ãƒãƒ³ã‚¹ç”Ÿæˆï¼ˆã‚·ãƒ³ãƒ—ãƒ«ãªä¾‹ï¼‰
        function generateAIResponse(question) {
            // å®Ÿéš›ã®å®Ÿè£…ã§ã¯APIã‚’å‘¼ã¶ãªã©ã‚ˆã‚Šæ´—ç·´ã•ã‚ŒãŸæ–¹æ³•ã‚’ä½¿ã„ã¾ã™
            const responses = {
                'ã‚¿ãƒªã‚¹ã‚«ãƒ¼44å¹´': 'ã‚¿ãƒªã‚¹ã‚«ãƒ¼44å¹´ã¯ã€ã‚¹ã‚³ãƒƒãƒˆãƒ©ãƒ³ãƒ‰ã®ã‚¹ã‚«ã‚¤å³¶ã§2018å¹´ã«é™å®šãƒªãƒªãƒ¼ã‚¹ã•ã‚ŒãŸéå¸¸ã«å¸Œå°‘ãªãƒœãƒˆãƒ«ã§ã™ã€‚é•·æœŸç†Ÿæˆã«ã‚ˆã‚‹æ·±ã„è¤‡é›‘ã•ã¨ã€ã‚¿ãƒªã‚¹ã‚«ãƒ¼ç‰¹æœ‰ã®å¡©å‘³ã€æµ·è—»ã€æŸ‘æ©˜ç³»ã®é¢¨å‘³ãŒç‰¹å¾´ã§ã™ã€‚ç¾åœ¨ã®å¸‚å ´ä¾¡æ ¼ã¯ç´„Â¥80,400ã§ã™ã€‚',
                '3000å††ä»¥ä¸‹': 'ã‚­ãƒ«ãƒ›ãƒ¼ãƒãƒ³2013-2021ä¿¡æ¿ƒå±‹ãŒÂ¥2,000ã§ã‚¹ãƒ¢ãƒ¼ã‚­ãƒ¼ãªã‚¢ã‚¤ãƒ©ãƒ¢ãƒ«ãƒˆã¨ã—ã¦ãŠã™ã™ã‚ã§ã™ã€‚å¼·ã„ãƒ”ãƒ¼ãƒˆæ„Ÿã¨æ½®æ°—ã‚’æ„Ÿã˜ã‚‰ã‚Œã‚‹ã€ã‚³ã‚¹ãƒˆãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã®é«˜ã„ä¸€æœ¬ã§ã™ã€‚',
                'æ—¥æœ¬ã®ãƒ•ãƒ«ãƒ¼ãƒ†ã‚£ãƒ¼': 'è»½äº•æ²¢25å¹´ã¯æ—¥æœ¬ã‚’ä»£è¡¨ã™ã‚‹ãƒ•ãƒ«ãƒ¼ãƒ†ã‚£ãƒ¼ãªã‚¦ã‚¤ã‚¹ã‚­ãƒ¼ã§ã€æ´—ç·´ã•ã‚ŒãŸæœå®Ÿå‘³ã¨è¤‡é›‘ã•ãŒç‰¹å¾´ã§ã™ã€‚ä¾¡æ ¼ã¯Â¥25,000ç¨‹åº¦ã§ã€é•·æœŸç†Ÿæˆã«ã‚ˆã‚‹æ·±ã¿ã®ã‚ã‚‹å‘³ã‚ã„ãŒæ¥½ã—ã‚ã¾ã™ã€‚',
                'è¤‡é›‘ãªã‚¦ã‚£ã‚¹ã‚­ãƒ¼': 'ãƒãƒƒã‚«ãƒ©ãƒ³1990å¹´SAMAROLIã¯è¤‡é›‘ã•5ç‚¹æº€ç‚¹ã®ç´ æ™´ã‚‰ã—ã„ã‚¦ã‚¤ã‚¹ã‚­ãƒ¼ã§ã™ã€‚Â¥12,200ã¨ãƒªãƒ¼ã‚ºãƒŠãƒ–ãƒ«ãªä¾¡æ ¼ã§ã€è±Šã‹ãªã‚·ã‚§ãƒªãƒ¼ã®é¢¨å‘³ã¨ã‚¹ãƒ‘ã‚¤ã‚¹ã®è¤‡é›‘ãªç›¸äº’ä½œç”¨ãŒæ¥½ã—ã‚ã¾ã™ã€‚'
            };
            
            // ç°¡æ˜“çš„ãªã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ãƒãƒƒãƒãƒ³ã‚°
            for (const [key, response] of Object.entries(responses)) {
                if (question.includes(key)) {
                    return response;
                }
            }
            
            return 'ã”è³ªå•ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã™ã€‚è©³ç´°ãªæƒ…å ±ã‚’æ¤œç´¢ä¸­ã§ã™ã€‚ã‚‚ã†å°‘ã—å…·ä½“çš„ãªã‚¦ã‚£ã‚¹ã‚­ãƒ¼åã‚„å¥½ã¿ã‚’ãŠæ•™ãˆã„ãŸã ã‘ã¾ã™ã¨ã€ã‚ˆã‚Šçš„ç¢ºãªã”æ¡ˆå†…ãŒã§ãã¾ã™ã€‚';
        }
        
        // ãƒ¬ã‚³ãƒ¡ãƒ³ãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã®å–å¾—
        function getRecommendation() {
            const loadingIndicator = document.getElementById('loadingIndicator');
            const progressContainer = document.getElementById('progressContainer');
            const splitLayoutContainer = document.getElementById('splitLayoutContainer');
            
            // UIæ›´æ–°
            loadingIndicator.style.display = 'block';
            progressContainer.style.display = 'block';
            splitLayoutContainer.style.display = 'none';
            
            // ãƒ—ãƒ­ã‚°ãƒ¬ã‚¹ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³
            let progress = 0;
            const progressFill = document.getElementById('progressFill');
            const progressPercentage = document.getElementById('progressPercentage');
            const progressInterval = setInterval(() => {
                progress += Math.random() * 15;
                if (progress > 100) {
                    progress = 100;
                    clearInterval(progressInterval);
                    
                    // å‡¦ç†å®Œäº†
                    setTimeout(() => {
                        loadingIndicator.style.display = 'none';
                        progressContainer.style.display = 'none';
                        splitLayoutContainer.style.display = 'grid';
                        
                        // ãƒ—ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹ã‚µãƒãƒªãƒ¼ã‚’æ›´æ–°
                        updatePreferencesSummary();
                        
                        // ãƒ¬ã‚³ãƒ¡ãƒ³ãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã‚’è¡¨ç¤º
                        displayRecommendations();
                        
                        // æœ€åˆã®ã‚¦ã‚£ã‚¹ã‚­ãƒ¼ã‚’é¸æŠ
                        const firstRecommendation = document.querySelector('.whisky-card');
                        if (firstRecommendation) {
                            const whiskyId = firstRecommendation.getAttribute('onclick').match(/\d+/)[0];
                            selectWhisky(whiskyId);
                        }
                    }, 500);
                }
                progressFill.style.width = `${progress}%`;
                progressPercentage.textContent = `${Math.round(progress)}%`;
            }, 200);
        }
        
        // ãƒªãƒ•ãƒ¬ãƒƒã‚·ãƒ¥ã—ã¦å†ææ¡ˆ
        function refreshRecommendation() {
            // UIã‚’ãƒªã‚»ãƒƒãƒˆ
            initTasteMatrix();
            initPriceSliders();
            
            // ãƒãƒ£ãƒƒãƒˆå±¥æ­´ã‚’ã‚¯ãƒªã‚¢
            const chatHistory = document.getElementById('chatHistory');
            chatHistory.innerHTML = '';
            chatHistory.style.display = 'none';
            
            // ãƒãƒ£ãƒƒãƒˆå…¥åŠ›ã‚’ã‚¯ãƒªã‚¢
            document.getElementById('chatInput').value = '';
            
            // ãƒ¬ã‚³ãƒ¡ãƒ³ãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³çµæœã‚’éè¡¨ç¤º
            document.getElementById('splitLayoutContainer').style.display = 'none';
            
            // è¿½åŠ ã®ãƒªã‚»ãƒƒãƒˆå‡¦ç†ï¼ˆå¿…è¦ã«å¿œã˜ã¦ï¼‰
            if (profileChartInstance) {
                profileChartInstance.destroy();
                profileChartInstance = null;
            }
            
            selectedWhisky = null;
            
            // ãƒ¬ãƒ¼ãƒ€ãƒ¼ãƒãƒ£ãƒ¼ãƒˆã®ã‚­ãƒ£ãƒ³ãƒã‚¹ã‚’ãƒªã‚»ãƒƒãƒˆ
            const chartCanvas = document.getElementById('combinedProfileChart');
            if (chartCanvas) {
                const ctx = chartCanvas.getContext('2d');
                ctx.clearRect(0, 0, chartCanvas.width, chartCanvas.height);
            }
        }
        
        // åˆ¥ã®ã‚¦ã‚£ã‚¹ã‚­ãƒ¼ææ¡ˆ
        function getAnotherRecommendation() {
            // ãƒ©ãƒ³ãƒ€ãƒ ãª3ã¤ã®ã‚¦ã‚£ã‚¹ã‚­ãƒ¼ã‚’é¸ã¶
            displayRecommendations(true);
            
            // æœ€åˆã®ã‚¦ã‚£ã‚¹ã‚­ãƒ¼ã‚’é¸æŠ
            const firstRecommendation = document.querySelector('.whisky-card');
            if (firstRecommendation) {
                const whiskyId = firstRecommendation.getAttribute('onclick').match(/\d+/)[0];
                selectWhisky(whiskyId);
            }
        }
        
        // ãƒ—ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹ã‚µãƒãƒªãƒ¼ã‚’æ›´æ–°
        function updatePreferencesSummary() {
            const summary = document.getElementById('preferencesSummary');
            
            // å‘³ã®å‚¾å‘ã®ãƒ†ã‚­ã‚¹ãƒˆç”Ÿæˆ
            let tasteDescription = '';
            if (userPreferences.taste.x > 0.66) {
                tasteDescription += 'ãƒ˜ãƒ“ãƒ¼ã§';
            } else if (userPreferences.taste.x < 0.33) {
                tasteDescription += 'ãƒ©ã‚¤ãƒˆã§';
            } else {
                tasteDescription += 'ãƒãƒ©ãƒ³ã‚¹ã®ã¨ã‚ŒãŸ';
            }
            
            if (userPreferences.taste.y > 0.66) {
                tasteDescription += 'ã‚¹ãƒ¢ãƒ¼ã‚­ãƒ¼ãª';
            } else if (userPreferences.taste.y < 0.33) {
                tasteDescription += 'ãƒ•ãƒ«ãƒ¼ãƒ†ã‚£ãƒ¼ãª';
            } else {
                tasteDescription += 'ãƒã‚¤ãƒ«ãƒ‰ãª';
            }
            
            // è¤‡é›‘ã•ã®ãƒ†ã‚­ã‚¹ãƒˆç”Ÿæˆ
            let complexityDescription = '';
            if (userPreferences.complexity.x > 0.66) {
                complexityDescription += 'ç†Ÿæˆã§';
            } else if (userPreferences.complexity.x < 0.33) {
                complexityDescription += 'è‹¥ã„ã§';
            } else {
                complexityDescription += 'é©åº¦ã«ç†Ÿæˆã—ãŸ';
            }
            
            if (userPreferences.complexity.y > 0.66) {
                complexityDescription += 'å¼·çƒˆãª';
            } else if (userPreferences.complexity.y < 0.33) {
                complexityDescription += 'ã¾ã‚ã‚„ã‹ãª';
            } else {
                complexityDescription += 'é©åº¦ãª';
            }
            
            // HTMLã‚’æ›´æ–°
            summary.innerHTML = `
                <h3 class="text-lg font-bold mb-3">ğŸ¯ ã‚ãªãŸã®å¥½ã¿ã®å‚¾å‘</h3>
                <div class="space-y-2 text-sm">
                    <div><strong>åŸºæœ¬çš„ãªå‘³ã®å‚¾å‘:</strong> ${tasteDescription}å‘³ã‚ã„ã‚’å¥½ã‚€</div>
                    <div><strong>è¤‡é›‘ã•ã®å¥½ã¿:</strong> ${complexityDescription}è¤‡é›‘ã•ã‚’å¥½ã‚€</div>
                    <div><strong>ä¾¡æ ¼å¸¯:</strong> Â¥${userPreferences.minPrice},000 - Â¥${userPreferences.maxPrice},000</div>
                    
                    <div class="mt-3 pt-2 border-t border-gray-600">
                        ã“ã®ç·åˆãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«ã«åŸºã¥ã„ã¦ã€æœ€é©ãª3éŠ˜æŸ„ã‚’å³é¸ã—ã¾ã—ãŸã€‚
                    </div>
                </div>
            `;
        }
        
        // ãƒ¬ã‚³ãƒ¡ãƒ³ãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã‚’è¡¨ç¤º
        function displayRecommendations(random = false) {
            const recommendationContent = document.getElementById('recommendationContent');
            
            // ã‚¦ã‚£ã‚¹ã‚­ãƒ¼ãƒ‡ãƒ¼ã‚¿ãŒãªã„å ´åˆ
            if (!whiskyData || whiskyData.length === 0) {
                recommendationContent.innerHTML = '<div class="error">ã‚¦ã‚£ã‚¹ã‚­ãƒ¼ãƒ‡ãƒ¼ã‚¿ãŒèª­ã¿è¾¼ã¾ã‚Œã¦ã„ã¾ã›ã‚“</div>';
                return;
            }
            
            // ã‚¦ã‚£ã‚¹ã‚­ãƒ¼ã‚’ã‚¹ã‚³ã‚¢è¨ˆç®—ã—ã¦ä¸¦ã¹æ›¿ãˆ
            let scoredWhiskies = whiskyData.map(whisky => {
                const score = calculateWhiskyScore(whisky);
                return { ...whisky, score };
            });
            
            scoredWhiskies.sort((a, b) => b.score - a.score);
            
            // ãƒ©ãƒ³ãƒ€ãƒ ãƒ¢ãƒ¼ãƒ‰ã®å ´åˆã¯ã‚·ãƒ£ãƒƒãƒ•ãƒ«
            if (random) {
                scoredWhiskies = shuffleArray(scoredWhiskies);
            }
            
            // ä¸Šä½3ã¤ã®ã‚¦ã‚£ã‚¹ã‚­ãƒ¼ã‚’è¡¨ç¤º
            const topWhiskies = scoredWhiskies.slice(0, 3);
            let htmlContent = '';
            
            topWhiskies.forEach((whisky, index) => {
                const isFirst = index === 0;
                const matchPercentage = Math.round(whisky.score * 100);
                
                htmlContent += `
                    <div class="whisky-card ${isFirst ? 'featured' : ''}" onclick="selectWhisky('${whisky.id}')">
                        ${isFirst ? '<div class="featured-label">â­ æœ€ã‚‚ãŠã™ã™ã‚</div>' : ''}
                        <h3 class="text-xl font-bold mb-2">${whisky.name}</h3>
                        <div class="flex justify-between items-center mb-2">
                            <span class="text-lg font-semibold text-green-400">Â¥${whisky.price.toLocaleString()}</span>
                            <span class="text-sm bg-blue-600 px-2 py-1 rounded">${whisky.region}</span>
                        </div>
                        <p class="text-sm text-gray-300 mb-2">${whisky.category || 'Whisky'}</p>
                        <p class="text-sm mb-3">${whisky.description_jp || whisky.description || 'æƒ…å ±ãŒã‚ã‚Šã¾ã›ã‚“'}</p>
                        <div class="flex justify-between items-center">
                            <span class="text-sm text-gray-400">é©åˆåº¦: ${matchPercentage}%</span>
                            <div class="w-24 h-2 bg-gray-700 rounded-full">
                                <div class="h-full bg-gradient-to-r from-red-500 to-green-500 rounded-full" style="width: ${matchPercentage}%"></div>
                            </div>
                        </div>
                    </div>
                `;
            });
            
            recommendationContent.innerHTML = htmlContent;
        }
        
        // ã‚¦ã‚£ã‚¹ã‚­ãƒ¼ã‚¹ã‚³ã‚¢ã®è¨ˆç®—
        function calculateWhiskyScore(whisky) {
            if (!whisky) return 0;
            
            let score = 0;
            
            // ä¾¡æ ¼ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ï¼ˆä¾¡æ ¼ç¯„å›²å¤–ãªã‚‰ä½ã‚¹ã‚³ã‚¢ï¼‰
            const minPrice = userPreferences.minPrice * 1000;
            const maxPrice = userPreferences.maxPrice * 1000;
            if (whisky.price < minPrice || whisky.price > maxPrice) {
                return 0.01; // ä¾¡æ ¼ç¯„å›²å¤–
            }
            
            // å‘³ã®ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆãƒ•ãƒ«ãƒ¼ãƒ†ã‚£ãƒ¼/ã‚¹ãƒ¢ãƒ¼ã‚­ãƒ¼ã€ãƒ©ã‚¤ãƒˆ/ãƒ˜ãƒ“ãƒ¼ï¼‰ã®ä¸€è‡´åº¦
            if (whisky.profile) {
                // Xè»¸: ãƒ©ã‚¤ãƒˆ(0) â†’ ãƒ˜ãƒ“ãƒ¼(1)
                // ãƒ•ãƒ«ãƒ¼ãƒ†ã‚£ãƒ¼/ã‚¹ãƒ¢ãƒ¼ã‚­ãƒ¼ã¨ãƒœãƒ‡ã‚£æ„Ÿã‚’è€ƒæ…®
                const userX = userPreferences.taste.x;
                const whiskyX = (whisky.profile.body || 3) / 5; // 1-5ã‚¹ã‚±ãƒ¼ãƒ«ã‚’0-1ã«å¤‰æ›
                
                // Yè»¸: ãƒ•ãƒ«ãƒ¼ãƒ†ã‚£ãƒ¼(0) â†’ ã‚¹ãƒ¢ãƒ¼ã‚­ãƒ¼(1)
                const userY = userPreferences.taste.y;
                const whiskyY = (whisky.profile.smoky || 3) / 5; // 1-5ã‚¹ã‚±ãƒ¼ãƒ«ã‚’0-1ã«å¤‰æ›
                
                // è·é›¢ãƒ™ãƒ¼ã‚¹ã®ã‚¹ã‚³ã‚¢ï¼ˆè¿‘ã„ã»ã©é«˜ã‚¹ã‚³ã‚¢ï¼‰
                const tasteDistance = Math.sqrt(
                    Math.pow(userX - whiskyX, 2) + 
                    Math.pow(userY - whiskyY, 2)
                );
                score += (1 - tasteDistance) * 0.4; // 40%ã®ã‚¦ã‚§ã‚¤ãƒˆ
                
                // è¤‡é›‘ã•ã®ä¸€è‡´åº¦
                const userComplexityX = userPreferences.complexity.x;
                const userComplexityY = userPreferences.complexity.y;
                
                // Xè»¸: è‹¥ã„(0) â†’ ç†Ÿæˆ(1)
                // Yè»¸: ã¾ã‚ã‚„ã‹(0) â†’ å¼·çƒˆ(1)
                const whiskyComplexity = (whisky.profile.complexity || 3) / 5;
                const whiskySweetness = (whisky.profile.sweetness || 3) / 5;
                const whiskySpicy = (whisky.profile.spicy || 3) / 5;
                
                // è¤‡é›‘ã•ã®ã‚¹ã‚³ã‚¢ï¼ˆå¤§ãã„å€¤ã»ã©è¤‡é›‘ï¼‰
                const whiskyComplexityX = (whiskySpicy + whiskyComplexity) / 2; // è‹¥ã„/ç†Ÿæˆè»¸
                const whiskyComplexityY = (whiskyComplexity + (1 - whiskySweetness)) / 2; // ã¾ã‚ã‚„ã‹/å¼·çƒˆè»¸
                
                const complexityDistance = Math.sqrt(
                    Math.pow(userComplexityX - whiskyComplexityX, 2) + 
                    Math.pow(userComplexityY - whiskyComplexityY, 2)
                );
                score += (1 - complexityDistance) * 0.4; // 40%ã®ã‚¦ã‚§ã‚¤ãƒˆ
            }
            
            // ä¾¡æ ¼æœ€é©åŒ–ï¼ˆè¨­å®šç¯„å›²å†…ã§ç†æƒ³çš„ãªä¾¡æ ¼ã«è¿‘ã„ã»ã©é«˜ã‚¹ã‚³ã‚¢ï¼‰
            const priceRange = maxPrice - minPrice;
            if (priceRange > 0) {
                const idealPrice = minPrice + priceRange * 0.7; // 70%ã®ä½ç½®ã‚’ç†æƒ³ã¨ã™ã‚‹
                const priceDiff = Math.abs(whisky.price - idealPrice) / priceRange;
                score += (1 - priceDiff) * 0.2; // 20%ã®ã‚¦ã‚§ã‚¤ãƒˆ
            }
            
            return Math.max(0.01, Math.min(1, score)); // 0.01-1.0ã®ç¯„å›²ã«åã‚ã‚‹
        }
        
        // é…åˆ—ã‚’ã‚·ãƒ£ãƒƒãƒ•ãƒ«
        function shuffleArray(array) {
            const result = [...array];
            for (let i = result.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [result[i], result[j]] = [result[j], result[i]];
            }
            return result;
        }
        
        // ã‚¦ã‚£ã‚¹ã‚­ãƒ¼ã®é¸æŠ
        function selectWhisky(whiskyId) {
            // é¸æŠã—ãŸã‚¦ã‚£ã‚¹ã‚­ãƒ¼ã‚’å–å¾—
            const whisky = whiskyData.find(w => w.id == whiskyId);
            if (!whisky) return;
            
            selectedWhisky = whisky;
            
            // ã‚«ãƒ¼ãƒ‰ã®é¸æŠçŠ¶æ…‹ã‚’æ›´æ–°
            document.querySelectorAll('.whisky-card').forEach(card => {
                card.classList.remove('selected');
            });
            
            const selectedCard = document.querySelector(`.whisky-card[onclick*="${whiskyId}"]`);
            if (selectedCard) {
                selectedCard.classList.add('selected');
            }
            
            // ãƒãƒ£ãƒ¼ãƒˆã‚’æ›´æ–°
            updateCombinedProfileChart(whisky);
            
            // ãƒãƒ£ãƒ¼ãƒˆã‚¿ã‚¤ãƒˆãƒ«ã‚’æ›´æ–°
            document.getElementById('chartTitle').textContent = `ã‚ãªãŸã®å¥½ã¿ vs ${whisky.name}`;
            
            // è’¸ç•™æ‰€æƒ…å ±ã‚’æ›´æ–°
            updateDistilleryMap(whisky);
        }
        
        // è¤‡åˆãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«ãƒãƒ£ãƒ¼ãƒˆã®æ›´æ–°
        function updateCombinedProfileChart(whisky) {
            const ctx = document.getElementById('combinedProfileChart').getContext('2d');
            
            // æ—¢å­˜ã®ãƒãƒ£ãƒ¼ãƒˆãŒã‚ã‚Œã°ç ´æ£„
            if (profileChartInstance) {
                profileChartInstance.destroy();
            }
            
            // ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ—ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹ã‚’å¤‰æ›
            const userTasteX = userPreferences.taste.x * 5; // 0-1ã‚’0-5ã«å¤‰æ›
            const userTasteY = userPreferences.taste.y * 5;
            const userComplexityX = userPreferences.complexity.x * 5;
            const userComplexityY = userPreferences.complexity.y * 5;
            
            const userProfile = {
                fruity: 5 - userTasteY,  // ãƒ•ãƒ«ãƒ¼ãƒ†ã‚£ãƒ¼ã¯Yã®é€†ï¼ˆ0=ã‚¹ãƒ¢ãƒ¼ã‚­ãƒ¼ã€5=ãƒ•ãƒ«ãƒ¼ãƒ†ã‚£ãƒ¼ï¼‰
                smoky: userTasteY,
                body: userTasteX,
                spicy: userComplexityX * 0.8,  // è‹¥ã„/ç†Ÿæˆã‚’é©åº¦ã«å¤‰æ›
                sweetness: 5 - userComplexityY,  // ã¾ã‚ã‚„ã‹ã•ã¯Yã®é€†
                complexity: userComplexityX * 0.5 + userComplexityY * 0.5  // è¤‡é›‘ã•ã¯ä¸¡æ–¹ã®çµ„ã¿åˆã‚ã›
            };
            
            // ã‚¦ã‚£ã‚¹ã‚­ãƒ¼ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«ã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤
            const whiskyProfile = whisky.profile || {
                fruity: 3,
                smoky: 3,
                body: 3,
                spicy: 3,
                sweetness: 3,
                complexity: 3
            };
            
            // æ—¥æœ¬èªãƒ©ãƒ™ãƒ«
            const labels = {
                fruity: 'ãƒ•ãƒ«ãƒ¼ãƒ†ã‚£ãƒ¼',
                smoky: 'ã‚¹ãƒ¢ãƒ¼ã‚­ãƒ¼',
                body: 'ãƒœãƒ‡ã‚£',
                spicy: 'ã‚¹ãƒ‘ã‚¤ã‚·ãƒ¼',
                sweetness: 'ç”˜ã•',
                complexity: 'è¤‡é›‘ã•'
            };
            
            // ãƒ¬ãƒ¼ãƒ€ãƒ¼ãƒãƒ£ãƒ¼ãƒˆã‚’ä½œæˆ
            profileChartInstance = new Chart(ctx, {
                type: 'radar',
                data: {
                    labels: Object.values(labels),
                    datasets: [
                        {
                            label: 'ã‚ãªãŸã®å¥½ã¿',
                            data: [
                                userProfile.fruity,
                                userProfile.smoky,
                                userProfile.body,
                                userProfile.spicy,
                                userProfile.sweetness,
                                userProfile.complexity
                            ],
                            backgroundColor: 'rgba(255, 107, 107, 0.2)',
                            borderColor: 'rgba(255, 107, 107, 1)',
                            pointBackgroundColor: 'rgba(255, 107, 107, 1)',
                            pointBorderColor: '#fff',
                            pointHoverBackgroundColor: '#fff',
                            pointHoverBorderColor: 'rgba(255, 107, 107, 1)'
                        },
                        {
                            label: whisky.name,
                            data: [
                                whiskyProfile.fruity,
                                whiskyProfile.smoky,
                                whiskyProfile.body,
                                whiskyProfile.spicy,
                                whiskyProfile.sweetness,
                                whiskyProfile.complexity
                            ],
                            backgroundColor: 'rgba(78, 205, 196, 0.2)',
                            borderColor: 'rgba(78, 205, 196, 1)',
                            pointBackgroundColor: 'rgba(78, 205, 196, 1)',
                            pointBorderColor: '#fff',
                            pointHoverBackgroundColor: '#fff',
                            pointHoverBorderColor: 'rgba(78, 205, 196, 1)'
                        }
                    ]
                },
                options: {
                    elements: {
                        line: {
                            borderWidth: 2
                        }
                    },
                    scales: {
                        r: {
                            angleLines: {
                                color: 'rgba(255, 255, 255, 0.2)'
                            },
                            grid: {
                                color: 'rgba(255, 255, 255, 0.2)'
                            },
                            pointLabels: {
                                color: 'rgba(255, 255, 255, 0.7)',
                                font: {
                                    size: 12
                                }
                            },
                            ticks: {
                                color: 'rgba(0, 0, 0, 0)',
                                backdropColor: 'rgba(0, 0, 0, 0)',
                                // ãƒãƒ£ãƒ¼ãƒˆå†…ã®æ•°å­—ã‚’å‰Šé™¤
                                display: false,
                                // ãƒ–ãƒ­ãƒƒã‚¯ã®è¡¨ç¤ºã‚’å‰Šé™¤
                                showLabelBackdrop: false
                            },
                            suggestedMin: 0,
                            suggestedMax: 5,
                            beginAtZero: true
                        }
                    },
                    plugins: {
                        legend: {
                            position: 'bottom',
                            labels: {
                                color: 'rgba(255, 255, 255, 0.7)',
                                font: {
                                    size: 12
                                }
                            }
                        }
                    }
                }
            });
        }
        
        // è’¸ç•™æ‰€ãƒãƒƒãƒ—ã®æ›´æ–°
        function updateDistilleryMap(whisky) {
            if (!whisky || !distilleryMap) return;
            
            // è’¸ç•™æ‰€åã®æŠ½å‡ºï¼ˆå¯èƒ½ãªãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‹ã‚‰ï¼‰
            let distilleryName = null;
            if (whisky.distillery) {
                distilleryName = whisky.distillery;
            } else if (whisky.name.includes(' ')) {
                distilleryName = whisky.name.split(' ')[0]; // æœ€åˆã®å˜èªã‚’è©¦ã™
            }
            
            // ãƒãƒ¼ã‚«ãƒ¼ã®æ›´æ–°
            updateDistilleryMarkers(distilleryName);
            
            // è’¸ç•™æ‰€ãŒè¦‹ã¤ã‹ã£ãŸå ´åˆã€ãƒãƒƒãƒ—ã‚’ä¸­å¿ƒã«
            const distillery = distilleryDatabase[distilleryName];
            if (distillery && distillery.location) {
                distilleryMap.setView([distillery.location.lat, distillery.location.lng], 8);
            } else {
                // è’¸ç•™æ‰€ãŒè¦‹ã¤ã‹ã‚‰ãªã„å ´åˆã€ãƒªãƒ¼ã‚¸ãƒ§ãƒ³ã«åŸºã¥ã„ãŸå ´æ‰€ã«ãƒãƒƒãƒ—ã®ä¸­å¿ƒã‚’è¨­å®š
                const regionCoords = getRegionCoordinates(whisky.region);
                distilleryMap.setView([regionCoords.lat, regionCoords.lng], regionCoords.zoom);
            }
            
            // è’¸ç•™æ‰€ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã®è¡¨ç¤º
            const distillerySection = document.getElementById('distillerySection');
            if (distillerySection) {
                distillerySection.classList.add('active');
            }
        }
        
        // åœ°åŸŸã®ä»£è¡¨åº§æ¨™ã‚’å–å¾—
        function getRegionCoordinates(region) {
            const defaultCoords = { lat: 55.0, lng: -3.0, zoom: 5 }; // ã‚¹ã‚³ãƒƒãƒˆãƒ©ãƒ³ãƒ‰
            
            const regionMap = {
                'Scotland': { lat: 57.0, lng: -4.0, zoom: 6 },
                'Islay': { lat: 55.75, lng: -6.15, zoom: 10 },
                'Speyside': { lat: 57.5, lng: -3.2, zoom: 9 },
                'Highland': { lat: 57.9, lng: -4.5, zoom: 7 },
                'Japan': { lat: 35.7, lng: 139.7, zoom: 5 },
                'Ireland': { lat: 53.4, lng: -8.0, zoom: 6 },
                'USA': { lat: 37.8, lng: -85.0, zoom: 5 }
            };
            
            if (!region) return defaultCoords;
            
            // æ­£ç¢ºãªåœ°åŸŸåã¾ãŸã¯åœ°åŸŸã‚’å«ã‚€æ–‡å­—åˆ—ã«ãƒãƒƒãƒ
            for (const [key, coords] of Object.entries(regionMap)) {
                if (region.includes(key)) {
                    return coords;
                }
            }
            
            return defaultCoords;
        }
        
        // ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®è’¸ç•™æ‰€ãƒ‡ãƒ¼ã‚¿ï¼ˆç·Šæ€¥ç”¨ï¼‰
        function getDefaultDistilleryData() {
            return {
                "Macallan": {
                    "name": "ãƒãƒƒã‚«ãƒ©ãƒ³è’¸æºœæ‰€ (The Macallan Distillery)",
                    "location": {
                        "lat": 57.4845,
                        "lng": -3.2082
                    },
                    "region": "Scotland, Speyside",
                    "founded": 1824,
                    "status": "active",
                    "description": "ã‚¹ãƒšã‚¤ã‚µã‚¤ãƒ‰åœ°æ–¹ã®ã‚¯ãƒ¬ã‚¤ã‚²ãƒ©ã‚­ãƒ¼æ‘è¿‘ãã«ä½ç½®ã—ã€ã‚·ã‚§ãƒªãƒ¼æ¨½ç†Ÿæˆã®æœ€é«˜å³°ã¨ã—ã¦ä¸–ç•Œçš„ãªè©•ä¾¡ã‚’å¾—ã¦ã„ã¾ã™ã€‚2018å¹´ã«æ–°ã—ã„æœ€å…ˆç«¯ã®è’¸ç•™æ‰€æ–½è¨­ã‚’é–‹è¨­ã€‚ç‹¬è‡ªã®å°å‹ã‚¹ãƒãƒ«ã¨å³æ ¼ãªæ¨½é¸å®šãƒãƒªã‚·ãƒ¼ã«ã‚ˆã‚Šã€è±Šã‹ãªæœå®Ÿå‘³ã¨è¤‡é›‘ã•ã‚’æŒã¤ã‚¦ã‚¤ã‚¹ã‚­ãƒ¼ã‚’ç”Ÿç”£ã—ã¦ã„ã¾ã™ã€‚"
                },
                "Port Ellen": {
                    "name": "ãƒãƒ¼ãƒˆã‚¨ãƒ¬ãƒ³è’¸æºœæ‰€ (Port Ellen Distillery)",
                    "location": {
                        "lat": 55.6306,
                        "lng": -6.1929
                    },
                    "region": "Scotland, Islay",
                    "founded": 1825,
                    "status": "closed",
                    "description": "1983å¹´ã«é–‰é–ã•ã‚ŒãŸã‚¢ã‚¤ãƒ©å³¶ã®ä¼èª¬çš„ãªè’¸æºœæ‰€ã€‚å¼·ã„æ³¥ç‚­ã¨æµ·é¢¨ã®ç‰¹å¾´ã‚’æŒã¤ã‚¦ã‚¤ã‚¹ã‚­ãƒ¼ã‚’ç”Ÿç”£ã—ã¦ã„ã¾ã—ãŸã€‚é–‰é–å¾Œã®ãƒœãƒˆãƒ«ã¯é«˜é¡ã§å–å¼•ã•ã‚Œã‚‹å¸Œå°‘å“ã¨ãªã£ã¦ã„ã¾ã™ã€‚Diageoç¤¾ãŒ2020å¹´ä»£ã«å†å»ºã‚’ç™ºè¡¨ã—ã€ãƒ•ã‚¡ãƒ³ã‹ã‚‰æ³¨ç›®ã•ã‚Œã¦ã„ã¾ã™ã€‚"
                },
                "Talisker": {
                    "name": "ã‚¿ãƒªã‚¹ã‚«ãƒ¼è’¸æºœæ‰€ (Talisker Distillery)",
                    "location": {
                        "lat": 57.3027,
                        "lng": -6.3562
                    },
                    "region": "Scotland, Isle of Skye",
                    "founded": 1830,
                    "status": "active",
                    "description": "ã‚¹ã‚³ãƒƒãƒˆãƒ©ãƒ³ãƒ‰ã®ã‚¹ã‚«ã‚¤å³¶ã§æœ€ã‚‚å¤ã„è’¸æºœæ‰€ã€‚æµ·è¾ºã®å²©å ´ã«å›²ã¾ã‚ŒãŸç’°å¢ƒã§ã€æ½®æ°—ã¨èƒ¡æ¤’ã®ã‚¹ãƒ‘ã‚¤ã‚·ãƒ¼ã•ãŒç‰¹å¾´çš„ãªã‚¦ã‚¤ã‚¹ã‚­ãƒ¼ã‚’ç”Ÿç”£ã€‚ç‹¬ç‰¹ã®è£½æ³•ã¨5ã¤ã®è’¸ç•™å™¨ã§è¤‡é›‘ãªé¢¨å‘³ã‚’ä½œã‚Šå‡ºã—ã¦ã„ã¾ã™ã€‚"
                },
                "Karuizawa": {
                    "name": "è»½äº•æ²¢è’¸æºœæ‰€ (Karuizawa Distillery)",
                    "location": {
                        "lat": 36.3481,
                        "lng": 138.5966
                    },
                    "region": "Japan, Nagano",
                    "founded": 1955,
                    "status": "closed",
                    "description": "2001å¹´ã«é–‰é–ã•ã‚ŒãŸæ—¥æœ¬ã®ä¼èª¬çš„ãªè’¸æºœæ‰€ã€‚æ¨™é«˜ã®é«˜ã„ç’°å¢ƒã§ã€ä¸»ã«ã‚·ã‚§ãƒªãƒ¼æ¨½ã‚’ä½¿ç”¨ã—ã¦ç†Ÿæˆã•ã›ãŸæ¿ƒåšã§è¤‡é›‘ãªã‚¦ã‚¤ã‚¹ã‚­ãƒ¼ã‚’ç”Ÿç”£ã€‚é–‰é–å¾Œã€æ®‹å­˜ãƒœãƒˆãƒ«ã¯ä¸–ç•Œçš„ãªã‚³ãƒ¬ã‚¯ã‚¿ãƒ¼ã‚¢ã‚¤ãƒ†ãƒ ã¨ãªã£ã¦ã„ã¾ã™ã€‚"
                }
            };
        }
        
        // ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®ã‚¦ã‚£ã‚¹ã‚­ãƒ¼ãƒ‡ãƒ¼ã‚¿ï¼ˆç·Šæ€¥ç”¨ï¼‰
        function getDefaultWhiskyData() {
            return [
                {
                    "id": 1,
                    "name": "ã‚¿ãƒªã‚¹ã‚«ãƒ¼44å¹´ã‚ªãƒ•ã‚£ã‚·ãƒ£ãƒ«ãƒœãƒˆãƒ«",
                    "price": 80400,
                    "region": "Scotland (Isle of Skye)",
                    "category": "Single Malt Scotch Whisky",
                    "description": "Limited to 1,997 bottles, this is the oldest official bottling of Talisker. Distilled in 1978, it was bottled in 2021 at the age of 44 years with an outturn of 1,997 bottles.",
                    "description_jp": "1,997æœ¬é™å®šã®ã€ã‚¿ãƒªã‚¹ã‚«ãƒ¼ã®å…¬å¼ãƒœãƒˆãƒªãƒ³ã‚°ã¨ã—ã¦ã¯æœ€ã‚‚å¤ã„ã‚¨ãƒ‡ã‚£ã‚·ãƒ§ãƒ³ã€‚1978å¹´ã«è’¸ç•™ã•ã‚Œã€44å¹´ç†Ÿæˆå¾Œã®2021å¹´ã«ãƒœãƒˆãƒªãƒ³ã‚°ã•ã‚Œã¾ã—ãŸã€‚",
                    "profile": {
                        "fruity": 3,
                        "smoky": 4,
                        "body": 5,
                        "spicy": 4,
                        "sweetness": 3,
                        "complexity": 5
                    },
                    "distillery": "Talisker"
                },
                {
                    "id": 2,
                    "name": "ãƒãƒ¼ãƒˆã‚¨ãƒ¬ãƒ³25å¹´ one of only bottles",
                    "price": 20400,
                    "region": "Scotland, Islay",
                    "category": "Single Malt Scotch Whisky",
                    "description": "A very rare Islay whisky from the closed Port Ellen distillery, bottled by independent bottler 'One of Only' at 25 years of age. Shows powerful maritime character and complex peat smoke.",
                    "description_jp": "é–‰é–ã•ã‚ŒãŸãƒãƒ¼ãƒˆã‚¨ãƒ¬ãƒ³è’¸æºœæ‰€ã«ã‚ˆã‚‹å¸Œå°‘ãªã‚¢ã‚¤ãƒ©ã‚¦ã‚¤ã‚¹ã‚­ãƒ¼ã€‚ã‚¤ãƒ³ãƒ‡ã‚£ãƒšãƒ³ãƒ‡ãƒ³ãƒˆãƒœãƒˆãƒ©ãƒ¼ã€ŒOne of Onlyã€ã«ã‚ˆã‚‹25å¹´ç†Ÿæˆãƒœãƒˆãƒ«ã€‚å¼·ã„æµ·æ´‹æ€§ã®ç‰¹å¾´ã¨è¤‡é›‘ãªæ³¥ç‚­ã®ç…™ãŒç‰¹å¾´ã€‚",
                    "profile": {
                        "fruity": 2,
                        "smoky": 5,
                        "body": 4,
                        "spicy": 3,
                        "sweetness": 2,
                        "complexity": 5
                    },
                    "distillery": "Port Ellen"
                },
                {
                    "id": 3,
                    "name": "ãƒãƒƒã‚«ãƒ©ãƒ³1990å¹´SAMAROLI",
                    "price": 12200,
                    "region": "Scotland",
                    "category": "Single Malt Scotch Whisky - Speyside",
                    "description": "Bottled by the legendary independent bottler Samaroli, this 1990 Macallan shows rich sherry influences with notes of dried fruits, orange peel, and Christmas cake, complemented by complex oak spices that harmonize with honey, toffee, and dark chocolate.",
                    "description_jp": "æœ‰åãªç‹¬ç«‹ç³»ãƒœãƒˆãƒ©ãƒ¼ã€ã‚µãƒãƒ­ãƒ¼ãƒªã«ã‚ˆã£ã¦ãƒœãƒˆãƒªãƒ³ã‚°ã•ã‚ŒãŸå¸Œå°‘ãªãƒãƒƒã‚«ãƒ©ãƒ³1990å¹´ã€‚è±Šã‹ãªã‚·ã‚§ãƒªãƒ¼ã®å½±éŸ¿ãŒã‚ã‚Šã€ãƒ‰ãƒ©ã‚¤ãƒ•ãƒ«ãƒ¼ãƒ„ã€ã‚ªãƒ¬ãƒ³ã‚¸ãƒ”ãƒ¼ãƒ«ã€ã‚¯ãƒªã‚¹ãƒã‚¹ã‚±ãƒ¼ã‚­ã®é¢¨å‘³ãŒç‰¹å¾´ã€‚è¤‡é›‘ãªæ¨½ã®ã‚¹ãƒ‘ã‚¤ã‚¹ãŒèœ‚èœœã€ãƒˆãƒ•ã‚£ãƒ¼ã€ãƒ€ãƒ¼ã‚¯ãƒãƒ§ã‚³ãƒ¬ãƒ¼ãƒˆã¨èª¿å’Œã—ã¦ã„ã¾ã™ã€‚",
                    "profile": {
                        "fruity": 4,
                        "smoky": 1,
                        "body": 4,
                        "spicy": 3,
                        "sweetness": 4,
                        "complexity": 5
                    },
                    "distillery": "Macallan"
                },
                {
                    "id": 4,
                    "name": "ãƒœã‚¦ãƒ¢ã‚¢26å¹´ãƒ€ãƒ³ã‚«ãƒ³ãƒ†ã‚¤ãƒ©ãƒ¼",
                    "price": 15000,
                    "region": "Scotland, Islay",
                    "category": "Single Malt Scotch Whisky",
                    "description": "A beautifully matured expression from Bowmore distillery, bottled by Duncan Taylor. Shows the perfect balance between Islay's smokiness and the fruit development from extended maturation.",
                    "description_jp": "ãƒœã‚¦ãƒ¢ã‚¢è’¸æºœæ‰€ã®ç¾ã—ãç†Ÿæˆã•ã‚ŒãŸè¡¨ç¾ã§ã€ãƒ€ãƒ³ã‚«ãƒ³ãƒ†ã‚¤ãƒ©ãƒ¼ç¤¾ã«ã‚ˆã£ã¦ãƒœãƒˆãƒªãƒ³ã‚°ã€‚ã‚¢ã‚¤ãƒ©å³¶ã®ã‚¹ãƒ¢ãƒ¼ã‚­ãƒ¼ã•ã¨é•·æœŸç†Ÿæˆã«ã‚ˆã‚‹æœå®Ÿå‘³ã®ç™ºé”ã®ãƒãƒ©ãƒ³ã‚¹ãŒçµ¶å¦™ã€‚",
                    "profile": {
                        "fruity": 3,
                        "smoky": 4,
                        "body": 4,
                        "spicy": 3,
                        "sweetness": 3,
                        "complexity": 5
                    },
                    "distillery": "Bowmore"
                },
                {
                    "id": 5,
                    "name": "è»½äº•æ²¢25å¹´",
                    "price": 25000,
                    "region": "Japan",
                    "category": "Japanese Whisky",
                    "description": "A rare gem from the closed Karuizawa distillery, this 25-year-old expression showcases the intricate balance of Japanese precision with rich fruity character. Deep complexity and long-lasting finish.",
                    "description_jp": "é–‰é–ã•ã‚ŒãŸè»½äº•æ²¢è’¸æºœæ‰€ã‹ã‚‰ã®å¸Œå°‘ãªé€¸å“ã€‚25å¹´ç†Ÿæˆã•ã‚ŒãŸã“ã®è¡¨ç¾ã¯ã€æ—¥æœ¬ã®ç¹Šç´°ã•ã¨æœå®Ÿã®è±Šã‹ã•ã®ãƒãƒ©ãƒ³ã‚¹ãŒè¦‹äº‹ã€‚æ·±ã„è¤‡é›‘ã•ã¨é•·ãç¶šãä½™éŸ»ãŒç‰¹å¾´ã€‚",
                    "profile": {
                        "fruity": 4,
                        "smoky": 2,
                        "body": 4,
                        "spicy": 3,
                        "sweetness": 3,
                        "complexity": 5
                    },
                    "distillery": "Karuizawa"
                },
                {
                    "id": 6,
                    "name": "ã‚­ãƒ«ãƒ›ãƒ¼ãƒãƒ³2013-2021ä¿¡æ¿ƒå±‹",
                    "price": 2000,
                    "region": "Scotland, Islay",
                    "category": "Single Malt Scotch Whisky",
                    "description": "A young but characterful Islay whisky from Kilchoman, bottled exclusively for Shinanoya in Japan. Shows strong peat smoke combined with fresh citrus and maritime saltiness.",
                    "description_jp": "è‹¥ã„ãªãŒã‚‰ã‚‚å€‹æ€§çš„ãªã‚­ãƒ«ãƒ›ãƒ¼ãƒãƒ³ã®ã‚¢ã‚¤ãƒ©ã‚¦ã‚¤ã‚¹ã‚­ãƒ¼ã€‚æ—¥æœ¬ã®ä¿¡æ¿ƒå±‹å‘ã‘ã®é™å®šãƒœãƒˆãƒ«ã€‚å¼·ã„ãƒ”ãƒ¼ãƒˆé¦™ã«æ–°é®®ãªæŸ‘æ©˜é¡ã¨æµ·ã®å¡©æ°—ãŒçµ„ã¿åˆã‚ã•ã£ã¦ã„ã¾ã™ã€‚",
                    "profile": {
                        "fruity": 2,
                        "smoky": 5,
                        "body": 3,
                        "spicy": 2,
                        "sweetness": 2,
                        "complexity": 4
                    },
                    "distillery": "Kilchoman"
                }
            ];
        }
    </script>


    <script id="html_badge_script1">
        window.__genspark_remove_badge_link = "https://www.genspark.ai/api/html_badge/" +
            "remove_badge?token=To%2FBnjzloZ3UfQdcSaYfDk2CYipYg1kZdCc9NIuFgIr1gHtLAABHPPEDrfWVWFviZPFyM1RvqUQcnuPQsRwqJ%2FNe%2F1b6uamb8oTq7lxs8mnoCJs2PeqIm9dho4gDSFspUa8jvfICEI4HVtzOdGPCXM7egsEPxETDGXbCqwfwKi1inyTmH1FUv1H4HjUjErg9mF3HrXSZbCbf4eMyCipsxvxv5kY4uIIc6U0Anf7tzbnFjPU6z41az46REP724x5TRjAY62V%2FmyBQl4RNYxd3imhc%2FkCyPlu9UUIu4zK%2BymNOo0umJBtMn7eAHYfQs4hyQ8gdNmeSUAWwgOFUP0ekVfLp4Tsoyth86v%2FTzdSF5TGlWlqez%2Fod9XovMwuqTBVFO2asihjz0yZvYZFAWTdk359L5ILyKvPe0QrInWlJT432AU4RAp%2BQyUW0VGtVZJKSFWDkFG%2FoB1ORuwoooPSl5FnDQVNgDL5PppGmlgh5zGQ%2Fpxergr3lDcAC5BuONsoS%2F0d9kBCjKVzzl6y9Ju8tng%3D%3D";
        window.__genspark_locale = "ja-JP";
        window.__genspark_token = "To/BnjzloZ3UfQdcSaYfDk2CYipYg1kZdCc9NIuFgIr1gHtLAABHPPEDrfWVWFviZPFyM1RvqUQcnuPQsRwqJ/Ne/1b6uamb8oTq7lxs8mnoCJs2PeqIm9dho4gDSFspUa8jvfICEI4HVtzOdGPCXM7egsEPxETDGXbCqwfwKi1inyTmH1FUv1H4HjUjErg9mF3HrXSZbCbf4eMyCipsxvxv5kY4uIIc6U0Anf7tzbnFjPU6z41az46REP724x5TRjAY62V/myBQl4RNYxd3imhc/kCyPlu9UUIu4zK+ymNOo0umJBtMn7eAHYfQs4hyQ8gdNmeSUAWwgOFUP0ekVfLp4Tsoyth86v/TzdSF5TGlWlqez/od9XovMwuqTBVFO2asihjz0yZvYZFAWTdk359L5ILyKvPe0QrInWlJT432AU4RAp+QyUW0VGtVZJKSFWDkFG/oB1ORuwoooPSl5FnDQVNgDL5PppGmlgh5zGQ/pxergr3lDcAC5BuONsoS/0d9kBCjKVzzl6y9Ju8tng==";
    </script>
    
    <script id="html_notice_dialog_script" src="./index_files/notice_dialog.js.ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰"></script>
    </body></html>